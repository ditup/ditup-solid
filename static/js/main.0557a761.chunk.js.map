{"version":3,"sources":["api.ts","HorizontalList.module.scss","Header.module.scss","DitItem.module.scss","Homepage.module.scss","PersonSummary.module.scss","DitItemForm.module.scss","app/hooks.ts","config.ts","app/services/solidApi.ts","app/services/interestApi.ts","features/login/loginAPI.ts","features/login/loginSlice.ts","app/services/ditapi.ts","app/store.ts","app/services/useQueries.ts","SearchInput.tsx","InterestSearchInput.tsx","EditableTagList.tsx","DitItemForm.tsx","useLoggedUser.ts","CreateDit.tsx","Discoverability.tsx","assets/main-image.png","PersonMini.tsx","TagList.tsx","DitItem.tsx","HorizontalList.tsx","PersonSummary.tsx","Discover.tsx","DitItemPage.tsx","DitList.tsx","EditDitPage.tsx","assets/logo-white.svg","Header.tsx","features/login/Login.tsx","Homepage.tsx","Person.tsx","Signup.tsx","TagPage.tsx","usePreviousUriAfterSolidRedirect.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["fetchImage","uri","a","fetch","response","headers","get","Buffer","arrayBuffer","from","toString","image","module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","ditUris","idea","problem","indexServers","JSON","parse","process","REACT_APP_INDEX_SERVERS","indexInboxes","REACT_APP_INDEX_INBOXES","solidApi","createApi","reducerPath","baseQuery","data","fetchProperties","fetchAll","getSolidDataset","dataset","createSolidDataset","remove","forEach","subject","predicate","object","thing","getThing","changedDataset","removeThing","updatedThing","removeAll","setThing","removeUrl","setString","createThing","url","setStringWithLocale","setDatetime","set","setUrl","add","addUrl","saveSolidDatasetAt","returnThings","getThingAll","filter","returnData","map","returnThing","Object","fromEntries","entries","key","value","getUrlAll","getStringEnglishAll","getStringNoLocaleAll","getDatetimeAll","length","find","error","message","tagTypes","endpoints","build","readPerson","query","name","foaf","photo","vcard","hasPhoto","interests","topic_interest","providesTags","result","type","id","transformResponse","readDitItem","rdf","label","rdfs","description","dct","tags","as","tag","creator","createdAt","created","updatedAt","modified","keys","Date","getTime","undefined","readDitItems","things","includes","results","addInterest","mutation","interest","invalidatesTags","removeInterest","createDit","updateDit","removeDit","readDiscoverability","queryFn","Promise","resolve","setTimeout","Error","sparqlEngine","QueryEngine","invalidateHttpCache","queryBindings","sources","bindingsStream","toArray","binding","notifyIndex","person","all","inbox","method","body","stringify","actor","param","getDitupUri","webId","baseUrl","exec","interestApi","fetchBaseQuery","searchInterests","encodeURIComponent","search","concepturi","rest","readInterest","match","wikidataRegex","meta","entity","values","entities","labels","en","descriptions","imageString","claims","P18","p","mainsnak","datavalue","logoImageString","P154","logoImage","officialWebsite","P856","aliases","login","oidcIssuer","solidLogin","redirectUrl","globalThis","location","href","clientName","init","handleIncomingRedirect","restorePreviousSession","getDefaultSession","info","createAsyncThunk","api","logout","loginSlice","createSlice","initialState","isLoggedIn","status","reducers","extraReducers","builder","addCase","pending","state","fulfilled","rejected","action","alert","payload","selectLogin","ditapi","baseSources","comunicaBaseQuery","getUser","discoverPeople","userId","count","commonCount","discoverDits","dit","store","configureStore","reducer","loginReducer","middleware","getDefaultMiddleware","concat","useQueries","params","useEffect","dispatch","initiate","unsubscribe","select","SearchInput","options","isLoading","placeholder","onChange","onSelect","e","target","option","onClick","InterestSearchInput","useState","setQuery","debouncedQuery","setDebouncedQuery","debouncedSet","useMemo","debounce","useQuery","skipToken","EditableTagList","onAddTag","onRemoveTag","tagsToFind","fetchedTags","combinedTags","i","split","pop","style","display","listStyleType","flexWrap","paddingLeft","margin","title","slice","to","className","TYPE_OPTIONS","DitItemForm","onSubmit","disabled","readonlyUri","setType","setLabel","setDescription","setTags","setUri","styles","form","preventDefault","cols","rows","tagUri","console","log","t","useLoggedUser","CreateDit","useMutation","isSuccess","crypto","randomUUID","DiscoverabilityAction","editable","indexed","onPublish","Discoverability","handlePublish","PersonMini","logo","setImage","img","src","width","TagList","me","highlightedTags","listStyles","horizontalList","color","ditIcon","DitItem","myself","ditContainer","ditType","toDateString","discoverability","HorizontalList","children","breakpointCols","default","masonryGrid","columnClassName","masonryGridColumn","PersonSummary","container","avatar","Discover","discoveredPeople","discoveredPeopleUris","personQueries","discoveredDits","isDiscoveringDits","discoveredDitUris","myDits","ditQueries","fetchedPeople","fetchedDits","peopleInCommon","countMatch","sort","b","myDitUris","ditsInCommon","isUninitialized","Math","round","common","intersection","DitItemPage","itemUri","useParams","isRemoving","DitList","EditDitPage","personUri","discoverableTags","isUpdating","handleSubmit","Header","header","homeLink","alt","separator","Login","provider","setProvider","list","Homepage","page","wrapper","homeImage","Person","personId","loginUri","isMe","handleAddTag","handleRemoveTag","Tags","join","Signup","TagPage","float","maxWidth","backgroundColor","usePreviousUriAfterSolidRedirect","navigate","useNavigate","onSessionRestore","URL","pathname","App","usePreviousUri","path","element","Boolean","window","hostname","createRoot","document","getElementById","render","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.0557a761.chunk.js","sourcesContent":["import { fetch } from '@inrupt/solid-client-authn-browser'\n\nexport const fetchImage = async (uri: string): Promise<string> => {\n  const response = await fetch(uri)\n\n  const image = `data:${response.headers.get(\n    'content-type',\n  )};base64,${Buffer.from(await response.arrayBuffer()).toString('base64')}`\n  return image\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"horizontalList\":\"HorizontalList_horizontalList__1L95r\",\"masonryGrid\":\"HorizontalList_masonryGrid__SBFhx\",\"masonryGridColumn\":\"HorizontalList_masonryGridColumn__wQWhs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__34Mnk\",\"homeLink\":\"Header_homeLink__2Plqh\",\"logo\":\"Header_logo__3Vr_I\",\"separator\":\"Header_separator__jCo-_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ditContainer\":\"DitItem_ditContainer__3S-pN\",\"ditType\":\"DitItem_ditType__WSDjH\",\"discoverability\":\"DitItem_discoverability__3m42V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Homepage_page__3ASb0\",\"wrapper\":\"Homepage_wrapper__yr9nO\",\"homeImage\":\"Homepage_homeImage__1og7O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PersonSummary_container__niwwK\",\"avatar\":\"PersonSummary_avatar__1cKL_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"DitItemForm_form__PfJgE\"};","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './store'\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n","export const ditUris = {\n  idea: 'https://ditup.example#Idea' as const,\n  problem: 'https://ditup.example#Problem' as const,\n} as const\n\n// rename to indexFragments and to REACT_APP_INDEX_FRAGMENTS\nexport const indexServers: readonly string[] = JSON.parse(\n  process.env.REACT_APP_INDEX_SERVERS || '[]',\n)\n\nexport const indexInboxes: readonly string[] = JSON.parse(\n  process.env.REACT_APP_INDEX_INBOXES || '[]',\n)\n","// Need to use the React-specific entry point to import createApi\nimport { QueryEngine } from '@comunica/query-sparql'\nimport {\n  addUrl,\n  createSolidDataset,\n  createThing,\n  getDatetimeAll,\n  getSolidDataset,\n  getStringEnglishAll,\n  getStringNoLocaleAll,\n  getThing,\n  getThingAll,\n  getUrlAll,\n  removeAll,\n  removeThing,\n  removeUrl,\n  saveSolidDatasetAt,\n  setDatetime,\n  setStringWithLocale,\n  setThing,\n  setUrl,\n  SolidDataset,\n  ThingPersisted,\n  WithChangeLog,\n} from '@inrupt/solid-client'\nimport { fetch } from '@inrupt/solid-client-authn-browser'\nimport { BaseQueryFn, createApi } from '@reduxjs/toolkit/query/react'\nimport { as, dct, foaf, rdf, rdfs, vcard } from 'rdf-namespaces'\nimport { ditUris, indexInboxes, indexServers } from '../../config'\nimport { DitThing, DitType, Person, Uri } from '../../types'\n\ntype Triple<T = string> = [string, string, T]\n\ntype MutationData = {\n  add?: Triple[]\n  set?: Triple[]\n  remove?: Triple[]\n  setString?: Triple[] // TODO think about language strings\n  setDatetime?: Triple<Date>[]\n}\n\ntype FetchShape = {\n  [key: string]: string\n}\n\ntype QueryResponse = {\n  [key: string]: string[]\n  uri: string[] /* this fixes an annoying TS error */\n}\n\ninterface QueryParams {\n  uri: string\n  fetchProperties: FetchShape\n  data?: MutationData\n  fetchAll?: boolean\n}\n\nconst solidQuery =\n  (): BaseQueryFn<QueryParams, QueryResponse[], { message: string }> =>\n  async ({ uri, data, fetchProperties, fetchAll = false }: QueryParams) => {\n    let dataset: SolidDataset\n    try {\n      dataset = await getSolidDataset(uri, { fetch })\n    } catch (e) {\n      dataset = createSolidDataset()\n    }\n\n    let changedDataset: (SolidDataset & WithChangeLog) | undefined\n\n    if (data?.remove)\n      data.remove.forEach(([subject, predicate, object]) => {\n        const thing = getThing(changedDataset ?? dataset, subject)\n        if (thing) {\n          if (predicate === '*') {\n            changedDataset = removeThing(changedDataset ?? dataset, thing)\n          } else if (object === '*') {\n            const updatedThing = removeAll(thing, predicate)\n            changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n          } else {\n            const updatedThing = removeUrl(thing, predicate, object)\n            changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n          }\n        }\n      })\n\n    if (data?.setString)\n      data.setString.forEach(([subject, predicate, object]) => {\n        const thing =\n          getThing(changedDataset ?? dataset, subject) ??\n          createThing({ url: subject })\n        if (thing) {\n          const updatedThing = setStringWithLocale(\n            thing,\n            predicate,\n            object,\n            'en',\n          )\n          changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n        }\n      })\n\n    if (data?.setDatetime)\n      data.setDatetime.forEach(([subject, predicate, object]) => {\n        const thing =\n          getThing(changedDataset ?? dataset, subject) ??\n          createThing({ url: subject })\n        if (thing) {\n          const updatedThing = setDatetime(thing, predicate, object)\n          changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n        }\n      })\n\n    if (data?.set)\n      data.set.forEach(([subject, predicate, object]) => {\n        const thing =\n          getThing(changedDataset ?? dataset, subject) ??\n          createThing({ url: subject })\n        if (thing) {\n          const updatedThing = setUrl(thing, predicate, object)\n          changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n        }\n      })\n\n    if (data?.add)\n      data.add.forEach(([subject, predicate, object]) => {\n        const thing =\n          getThing(changedDataset ?? dataset, subject) ??\n          createThing({ url: subject })\n\n        const updatedThing = addUrl(thing, predicate, object)\n        changedDataset = setThing(changedDataset ?? dataset, updatedThing)\n      })\n\n    if (changedDataset) {\n      await saveSolidDatasetAt(uri, changedDataset, { fetch })\n    }\n\n    let returnThings: ThingPersisted[]\n    if (!fetchAll) {\n      returnThings = [getThing(changedDataset ?? dataset, uri)].filter(\n        a => !!a,\n      ) as ThingPersisted[]\n    } else {\n      returnThings = getThingAll(changedDataset ?? dataset)\n    }\n\n    const returnData = returnThings.map(returnThing => ({\n      ...Object.fromEntries(\n        Object.entries(fetchProperties).map(([key, value]) => [\n          key,\n          [\n            ...getUrlAll(returnThing, value),\n            ...getStringEnglishAll(returnThing, value),\n            ...getStringNoLocaleAll(returnThing, value),\n            ...getDatetimeAll(returnThing, value),\n          ],\n        ]),\n      ),\n      uri: [returnThing.url],\n    }))\n\n    if (\n      !fetchAll &&\n      returnData.length === 0 &&\n      // also don't error when mutation removed the whole thing\n      !(data?.remove ?? []).find(([, predicate]) => predicate === '*')\n    )\n      return {\n        error: { message: 'thing not found' },\n      }\n\n    return {\n      data: returnData,\n    }\n  }\n\n// Define a service using a base URL and expected endpoints\nexport const solidApi = createApi({\n  reducerPath: 'solidapi',\n  baseQuery: solidQuery(),\n  tagTypes: ['Person', 'DitThing', 'Discoverability'],\n  endpoints: build => ({\n    readPerson: build.query<Person, string>({\n      query: uri => ({\n        uri,\n        fetchProperties: {\n          name: foaf.name,\n          photo: vcard.hasPhoto,\n          interests: foaf.topic_interest,\n        },\n      }),\n      providesTags: (result, error, uri) => [{ type: 'Person', id: uri }],\n      transformResponse: ([{ uri, name, photo, interests }]) => ({\n        uri: uri[0],\n        name: name[0] ?? '',\n        photo: photo[0] ?? '',\n        interests,\n      }),\n    }),\n    readDitItem: build.query<DitThing, Uri>({\n      query: uri => ({\n        uri,\n        fetchProperties: {\n          type: rdf.type,\n          label: rdfs.label,\n          description: dct.description,\n          tags: as.tag,\n          creator: dct.creator,\n          createdAt: dct.created,\n          updatedAt: dct.modified,\n        },\n      }),\n      transformResponse: ([\n        { uri, type, label, description, tags, creator, createdAt, updatedAt },\n      ]) => ({\n        uri: uri[0],\n        type:\n          (Object.keys(ditUris) as DitType[]).find(\n            key => ditUris[key] === type[0],\n          ) ?? 'idea',\n        label: label[0],\n        description: description[0],\n        tags,\n        creator: creator[0],\n        createdAt: createdAt[0]\n          ? new Date(createdAt[0]).getTime()\n          : (undefined as unknown as number), // an ugly hack, just to take care of things without creation date\n        updatedAt: updatedAt[0] ? new Date(updatedAt[0]).getTime() : undefined,\n      }),\n      providesTags: (result, error, uri) => [{ type: 'DitThing', id: uri }],\n    }),\n    readDitItems: build.query<DitThing[], Uri>({\n      query: uri => ({\n        uri,\n        fetchAll: true,\n        fetchProperties: {\n          type: rdf.type,\n          label: rdfs.label,\n          description: dct.description,\n          tags: as.tag,\n          creator: dct.creator,\n          createdAt: dct.created,\n          updatedAt: dct.modified,\n        },\n      }),\n      transformResponse: things =>\n        things\n          .map(\n            ({\n              uri,\n              type,\n              label,\n              description,\n              tags,\n              creator,\n              createdAt,\n              updatedAt,\n            }) => ({\n              uri: uri[0],\n              type: (Object.keys(ditUris) as DitType[]).find(key =>\n                type.includes(ditUris[key]),\n              ),\n              label: label[0],\n              description: description[0],\n              tags,\n              creator: creator[0],\n              createdAt: createdAt[0]\n                ? new Date(createdAt[0]).getTime()\n                : undefined,\n              updatedAt: updatedAt[0]\n                ? new Date(updatedAt[0]).getTime()\n                : undefined,\n            }),\n          )\n          .filter(thing => typeof thing.type !== 'undefined') as DitThing[],\n      providesTags: results =>\n        (results ?? []).map(result => ({ type: 'DitThing', id: result.uri })),\n    }),\n    addInterest: build.mutation<\n      { interests: string[] },\n      { uri: string; interest: string }\n    >({\n      query: ({ uri, interest }) => ({\n        uri,\n        data: {\n          add: [[uri, foaf.topic_interest, interest]],\n        },\n        fetchProperties: { interests: foaf.topic_interest },\n      }),\n      invalidatesTags: (result, error, { uri }) => [\n        { type: 'Person', id: uri },\n      ],\n    }),\n    removeInterest: build.mutation<\n      { interests: string[] },\n      { uri: string; interest: string }\n    >({\n      query: ({ uri, interest }) => ({\n        uri,\n        data: { remove: [[uri, foaf.topic_interest, interest]] },\n        fetchProperties: { interests: foaf.topic_interest },\n      }),\n      invalidatesTags: (result, error, { uri }) => [\n        { type: 'Person', id: uri },\n      ],\n    }),\n    createDit: build.mutation<\n      Uri,\n      { thing: Omit<DitThing, 'createdAt' | 'updatedAt'> }\n    >({\n      query: ({ thing }) => ({\n        uri: thing.uri,\n        data: {\n          add: [\n            [thing.uri, rdf.type, ditUris[thing.type]],\n            ...thing.tags.map(tag => [thing.uri, as.tag, tag] as Triple),\n          ],\n          setString: [\n            [thing.uri, rdfs.label, thing.label],\n            [thing.uri, dct.description, thing.description],\n          ],\n          setDatetime: [[thing.uri, dct.created, new Date()]],\n          set: [[thing.uri, dct.creator, thing.creator]],\n        },\n        fetchProperties: {},\n      }),\n      transformResponse: ([\n        {\n          uri: [uri],\n        },\n      ]) => uri,\n    }),\n    updateDit: build.mutation<\n      Uri,\n      { thing: Omit<DitThing, 'createdAt' | 'updatedAt'> }\n    >({\n      query: ({ thing }) => ({\n        uri: thing.uri,\n        data: {\n          set: [\n            [thing.uri, rdf.type, ditUris[thing.type]],\n            [thing.uri, dct.creator, thing.creator],\n          ],\n          remove: [[thing.uri, as.tag, '*']],\n          add: thing.tags.map(tag => [thing.uri, as.tag, tag] as Triple),\n          setString: [\n            [thing.uri, rdfs.label, thing.label],\n            [thing.uri, dct.description, thing.description],\n          ],\n          setDatetime: [[thing.uri, dct.modified, new Date()]],\n        },\n        fetchProperties: {},\n      }),\n      transformResponse: ([\n        {\n          uri: [uri],\n        },\n      ]) => uri,\n      invalidatesTags: (result, error, { thing }) => [\n        { type: 'DitThing', id: thing.uri },\n      ],\n    }),\n    removeDit: build.mutation<unknown, Uri>({\n      query: uri => ({\n        uri,\n        data: {\n          remove: [[uri, '*', '*']],\n        },\n        fetchProperties: {},\n      }),\n      invalidatesTags: (result, error, uri) => [{ type: 'DitThing', id: uri }],\n    }),\n    readDiscoverability: build.query<Uri[], Uri>({\n      queryFn: async uri => {\n        await new Promise(resolve => setTimeout(resolve, 1000))\n\n        if (indexServers.length === 0)\n          throw new Error('no index servers defined')\n\n        const sparqlEngine = new QueryEngine()\n        sparqlEngine.invalidateHttpCache()\n\n        const bindingsStream = await sparqlEngine.queryBindings(\n          `\n          SELECT DISTINCT ?tag WHERE {\n            <${uri}> <${foaf.topic_interest}> | <${as.tag}> ?tag.\n          }\n          `,\n          {\n            sources: [...indexServers] as [string, ...string[]],\n            fetch,\n          },\n        )\n\n        const tags = (await bindingsStream.toArray())\n          .map(binding => binding.get('tag')?.value ?? '')\n          .filter(a => !!a)\n\n        return { data: tags }\n      },\n      providesTags: (result, error, uri) => [\n        { type: 'Discoverability', id: uri },\n      ],\n    }),\n    notifyIndex: build.mutation<number, { uri: string; person: string }>({\n      queryFn: async ({ uri, person }) => {\n        await Promise.all(\n          indexInboxes.map(inbox =>\n            fetch(inbox, {\n              headers: { 'content-type': 'application/ld+json' },\n              method: 'POST',\n              body: JSON.stringify({ actor: person, object: uri }),\n            }),\n          ),\n        )\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        return { data: 0 }\n      },\n      invalidatesTags: (result, error, param) => [\n        { type: 'Discoverability', id: param.uri },\n      ],\n    }),\n  }),\n})\n\nexport const getDitupUri = (webId: string) => {\n  const baseUrl = /^(https?:\\/\\/.*)\\/profile\\/card#me$/g.exec(webId)?.[1]\n  if (!baseUrl) throw new Error('unable to generate hospex uri from webId')\n  return baseUrl + '/public/ditup.ttl'\n}\n","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\nimport { Interest } from '../../types'\n\nexport const interestApi = createApi({\n  reducerPath: 'interestapi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://www.wikidata.org/w/',\n  }),\n  tagTypes: ['Interest'],\n  endpoints: build => ({\n    searchInterests: build.query<Interest[], string>({\n      query: query => ({\n        url: `api.php?action=wbsearchentities&search=${encodeURIComponent(\n          query,\n        )}&language=en&limit=20&continue=0&format=json&uselang=en&type=item&origin=*`,\n      }),\n      // Pick out data and prevent nested properties in a hook or selector\n      transformResponse: (response: {\n        search: {\n          concepturi: string\n          label: string\n          description: string\n          photos: []\n          aliases: []\n        }[]\n      }) =>\n        response.search.map(({ concepturi, ...rest }) => ({\n          uri: concepturi,\n          ...rest,\n        })),\n      //*/\n      providesTags: (result, error, query) => [\n        { type: 'Interest', id: 'QUERY_STRING_' + query },\n      ],\n    }),\n    readInterest: build.query<Interest, string>({\n      query: uri => {\n        const id = uri.match(wikidataRegex)?.[2] ?? ''\n        return {\n          url: `api.php?action=wbgetentities&ids=${id}&languages=en&format=json&origin=*`,\n        }\n      },\n      transformResponse: (response: GetEntitiesResponse, meta, uri) => {\n        const entity = Object.values(response.entities)[0]\n        if (!entity) throw new Error('entity not found')\n\n        const label = entity.labels.en?.value ?? ''\n        const description = entity.descriptions.en?.value ?? ''\n        const imageString = (entity.claims.P18 ?? []).map(\n          p => p.mainsnak.datavalue.value,\n        )[0]\n        const logoImageString = (entity.claims.P154 ?? []).map(\n          p => p.mainsnak.datavalue.value,\n        )[0]\n        const image =\n          imageString &&\n          `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(\n            imageString,\n          )}?width=300`\n\n        const logoImage =\n          logoImageString &&\n          `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(\n            logoImageString,\n          )}?width=300`\n        const officialWebsite = (entity.claims.P856 ?? []).map(\n          p => p.mainsnak.datavalue.value,\n        )[0]\n        const aliases = (entity.aliases.en ?? []).map(({ value }) => value)\n\n        return {\n          uri,\n          label,\n          aliases,\n          description,\n          officialWebsite,\n          image: logoImage || image,\n        }\n      },\n      providesTags: (result, error, uri) => [{ type: 'Interest', id: uri }],\n    }),\n  }),\n})\n\nconst wikidataRegex =\n  /^https?:\\/\\/(w{3}\\.)?wikidata\\.org\\/entity\\/([A-Z0-9]*)\\/?$/\n/*\nexport const getInterest = async (uri: string): Promise<Interest> => {\n  const wikidataId = uri.match(wikidataRegex)?.[2] ?? ''\n  const dbpediaId = uri.match(dbpediaRegex)?.[2] ?? ''\n  const dataUri = wikidataId\n    ? `https://www.wikidata.org/wiki/Special:EntityData/${wikidataId}.ttl`\n    : dbpediaId\n    ? `https://dbpedia.org/data/${dbpediaId}.ttl`\n    : uri\n  const rawData = await (await fetchTurtle(dataUri)).text()\n  return await parseInterest(rawData, uri)\n}*/\n\ninterface GetEntitiesResponse {\n  entities: {\n    [key: string]: {\n      labels: { en?: { value: string } }\n      descriptions: { en?: { value: string } }\n      aliases: { en?: { value: string }[] }\n      claims: {\n        P18?: {\n          mainsnak: {\n            datavalue: { value: string }\n            datatype: 'commonsMedia'\n          }\n        }[]\n        P154?: {\n          mainsnak: {\n            datavalue: { value: string }\n            datatype: 'commonsMedia'\n          }\n        }[]\n        P856?: {\n          mainsnak: {\n            datavalue: { value: string }\n            datatype: 'url'\n          }\n        }[]\n      }\n    }\n  }\n}\n","import {\n  handleIncomingRedirect,\n  getDefaultSession,\n  login as solidLogin,\n} from '@inrupt/solid-client-authn-browser'\n\nexport const login = async (oidcIssuer: string) =>\n  await solidLogin({\n    oidcIssuer,\n    redirectUrl: globalThis.location.href,\n    clientName: 'ditup',\n  })\n\nexport const init = async () => {\n  await handleIncomingRedirect({\n    url: globalThis.location.href,\n    restorePreviousSession: true,\n  })\n\n  return getDefaultSession().info\n}\n\nexport { logout } from '@inrupt/solid-client-authn-browser'\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport { RootState } from '../../app/store'\nimport * as api from './loginAPI'\n\nexport interface LoginState {\n  webId: string\n  isLoggedIn: boolean\n  status: 'idle' | 'loading' | 'failed'\n}\n\nconst initialState: LoginState = {\n  webId: '',\n  isLoggedIn: false,\n  status: 'loading',\n}\n\nexport const login = createAsyncThunk('login/login', api.login)\nexport const init = createAsyncThunk('login/init', api.init)\nexport const logout = createAsyncThunk('login/logout', api.logout)\n\nexport const loginSlice = createSlice({\n  name: 'login',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {},\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\n  // including actions generated by createAsyncThunk or in other slices.\n  extraReducers: builder => {\n    builder\n      .addCase(login.pending, state => {\n        state.status = 'loading'\n      })\n      .addCase(login.fulfilled, state => {\n        state.status = 'idle'\n        state.isLoggedIn = true\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.status = 'failed'\n        alert(action.error.message)\n      })\n      .addCase(init.pending, state => {\n        state.status = 'loading'\n      })\n      .addCase(init.fulfilled, (state, action) => {\n        state.status = 'idle'\n        state.isLoggedIn = action.payload.isLoggedIn\n        state.webId = action.payload?.webId ?? ''\n      })\n      .addCase(logout.fulfilled, state => {\n        state.status = 'idle'\n        state.isLoggedIn = false\n        state.webId = ''\n      })\n  },\n})\n\nexport const selectLogin = (state: RootState) => state.login\n\nexport default loginSlice.reducer\n","import { QueryEngine } from '@comunica/query-sparql/lib/index-browser'\nimport { fetch } from '@inrupt/solid-client-authn-browser'\nimport { QueryReturnValue } from '@reduxjs/toolkit/dist/query/baseQueryTypes'\nimport { createApi } from '@reduxjs/toolkit/query/react'\nimport { as, foaf } from 'rdf-namespaces'\nimport { useMemo } from 'react'\nimport { indexServers } from '../../config'\nimport useQuery from '../../useQuery'\n\ntype User = {\n  name: string\n  photo: string\n}\n\nconst comunicaBaseQuery =\n  ({ baseSources }: { baseSources: string[] } = { baseSources: [] }) =>\n  async <ResponseType extends Record<string, string | null>>({\n    query,\n    sources,\n  }: {\n    query: string\n    sources: string[]\n  }): Promise<\n    QueryReturnValue<ResponseType[], unknown, Record<string, unknown>>\n  > => {\n    const sparqlEngine = new QueryEngine()\n\n    const bindingsStream = await sparqlEngine.queryBindings(query, {\n      sources: [...baseSources, ...sources] as [string, ...string[]],\n      fetch,\n    })\n    return {\n      data: (await bindingsStream.toArray()).map(binding => {\n        const keys = [...binding.keys()].map(\n          ({ value }) => value as keyof ResponseType,\n        )\n\n        return Object.fromEntries(\n          keys.map(key => [key, binding.get(key as string)?.value ?? null]),\n        ) as ResponseType\n      }),\n    }\n  }\n\nexport const ditapi = createApi({\n  reducerPath: 'ditapi',\n  baseQuery: comunicaBaseQuery(),\n  endpoints: builder => ({\n    getUser: builder.query<User, string>({\n      query: (webId: string) => ({\n        query: `\n          PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n          PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>\n          SELECT ?name ?photo WHERE {\n            <${webId}> foaf:name ?name.\n            OPTIONAL {<${webId}> vcard:hasPhoto ?photo.}\n          }`,\n        sources: [webId],\n      }),\n      transformResponse: (data: User[]) => data[0],\n    }),\n    discoverPeople: builder.query<{ uri: string; count: number }[], string>({\n      query: (userId: string) => ({\n        query: `\n          PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n          PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n          PREFIX owl: <http://www.w3.org/2002/07/owl#>\n          PREFIX dbo: <http://dbpedia.org/ontology/>\n          SELECT DISTINCT ?person (COUNT(DISTINCT ?thing) as ?commonCount)\n          WHERE {\n            <${userId}> foaf:topic_interest ?thing.\n            ?person foaf:topic_interest ?thing.\n            FILTER(?person != <${userId}>)\n          }\n          GROUP BY ?person`,\n        sources: [userId, ...indexServers],\n      }),\n      transformResponse: (data: { person: string; commonCount: string }[]) =>\n        data.map(({ person, commonCount }) => ({\n          uri: person,\n          count: +commonCount,\n        })),\n    }),\n    discoverDits: builder.query<{ uri: string; count: number }[], string>({\n      query: (userId: string) => ({\n        query: `\n          SELECT DISTINCT ?dit (COUNT(DISTINCT ?thing) as ?commonCount)\n          WHERE {\n            <${userId}> <${foaf.topic_interest}> ?thing.\n            ?dit <${as.tag}> ?thing.\n          }\n          GROUP BY ?dit`,\n        sources: [userId, ...indexServers],\n      }),\n      transformResponse: (data: { dit: string; commonCount: string }[]) =>\n        data.map(({ dit, commonCount }) => ({\n          uri: dit,\n          count: +commonCount,\n        })),\n    }),\n  }),\n})\n\nexport const useGetUserInterests = (userId: string) => {\n  const query = useMemo(\n    () =>\n      `\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n  PREFIX owl: <http://www.w3.org/2002/07/owl#>\n  PREFIX dbo: <http://dbpedia.org/ontology/>\n  SELECT DISTINCT ?uri ?label ?description\n  WHERE {\n    {\n      <${userId}> foaf:topic_interest ?uri.\n      ?uri rdfs:label ?label.\n      ?uri dbo:abstract ?description.\n    }\n    UNION {\n      <${userId}> foaf:topic_interest ?uri.\n      ?oneUri owl:sameAs ?uri.\n      ?oneUri rdfs:label ?label.\n      ?oneUri dbo:abstract ?description.\n    }\n    FILTER(lang(?label)='en')\n    FILTER(lang(?description)='en')\n  }`,\n    [userId],\n  )\n  const sources: [string, ...string[]] = useMemo(\n    () => [\n      userId,\n      // 'https://query.wikidata.org/sparql',\n      'https://query.wikidata.org/bigdata/ldf',\n      'https://fragments.dbpedia.org/2016-04/en',\n    ],\n    [userId],\n  )\n\n  const [errors, data, isLoading] = useQuery<{\n    uri: string\n    label: string\n    description: string\n  }>(query, sources)\n  return { errors, data, isLoading }\n}\n\nexport const useDiscoverPeople = (userId: string) => {\n  const query = useMemo(\n    () =>\n      `\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n  PREFIX owl: <http://www.w3.org/2002/07/owl#>\n  PREFIX dbo: <http://dbpedia.org/ontology/>\n  SELECT DISTINCT ?person (COUNT(DISTINCT ?thing) as ?commonCount)\n  WHERE {\n    <${userId}> foaf:topic_interest ?thing.\n    ?person foaf:topic_interest ?thing.\n    FILTER(?person != <${userId}>)\n  }\n  GROUP BY ?person\n  `,\n    [userId],\n  )\n  const sources: [string, ...string[]] = useMemo(\n    () => [userId, ...indexServers],\n    [userId],\n  )\n\n  const [errors, data, isLoading] = useQuery<{\n    person: string\n    commonCount: string\n  }>(query, sources)\n  return { errors, data, isLoading }\n}\n\n/*import { createApi, BaseQueryFn } from '@reduxjs/toolkit/query'\nimport axios, { AxiosRequestConfig, AxiosError } from 'axios'\n\nconst axiosBaseQuery =\n  (\n    { baseUrl }: { baseUrl: string } = { baseUrl: '' }\n  ): BaseQueryFn<\n    {\n      url: string\n      method: AxiosRequestConfig['method']\n      data?: AxiosRequestConfig['data']\n      params?: AxiosRequestConfig['params']\n    },\n    unknown,\n    unknown\n  > =>\n  async ({ url, method, data, params }) => {\n    try {\n      const result = await axios({ url: baseUrl + url, method, data, params })\n      return { data: result.data }\n    } catch (axiosError) {\n      let err = axiosError as AxiosError\n      return {\n        error: {\n          status: err.response?.status,\n          data: err.response?.data || err.message,\n        },\n      }\n    }\n  }\n\nconst api = createApi({\n  baseQuery: axiosBaseQuery({\n    baseUrl: 'https://example.com',\n  }),\n  endpoints(build) {\n    return {\n      query: build.query({ query: () => ({ url: '/query', method: 'get' }) }),\n      mutation: build.mutation({\n        query: () => ({ url: '/mutation', method: 'post' }),\n      }),\n    }\n  },\n})*/\n/*\nconst bindingsStream = await myEngine.queryBindings(`\n  SELECT ?s ?p ?o WHERE {\n    ?s ?p <http://dbpedia.org/resource/Belgium>.\n    ?s ?p ?o\n  } LIMIT 100`, {\n  sources: ['http://fragments.dbpedia.org/2015/en'],\n});\n\n// Consume results as a stream (best performance)\nbindingsStream.on('data', (binding) => {\n    console.log(binding.toString()); // Quick way to print bindings for testing\n\n    console.log(binding.has('s')); // Will be true\n\n    // Obtaining values\n    console.log(binding.get('s').value);\n    console.log(binding.get('s').termType);\n    console.log(binding.get('p').value);\n    console.log(binding.get('o').value);\n});\nbindingsStream.on('end', () => {\n    // The data-listener will not be called anymore once we get here.\n});\nbindingsStream.on('error', (error) => {\n    console.error(error);\n});\n\n// Consume results as an array (easier)\nconst bindings = await bindingsStream.toArray();\nconsole.log(bindings[0].get('s').value);\nconsole.log(bindings[0].get('s').termType);\n*/\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit'\nimport loginReducer from '../features/login/loginSlice'\nimport { ditapi } from './services/ditapi'\nimport { solidApi } from './services/solidApi'\nimport { interestApi } from './services/interestApi'\n\nexport const store = configureStore({\n  reducer: {\n    login: loginReducer,\n    [ditapi.reducerPath]: ditapi.reducer,\n    [solidApi.reducerPath]: solidApi.reducer,\n    [interestApi.reducerPath]: interestApi.reducer,\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware()\n      .concat(ditapi.middleware)\n      .concat(solidApi.middleware)\n      .concat(interestApi.middleware),\n})\n\nexport type AppDispatch = typeof store.dispatch\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n// https://github.com/reduxjs/redux-toolkit/discussions/1171#discussioncomment-2554980\n\nimport {\n  QueryDefinition,\n  EndpointDefinitions,\n} from '@reduxjs/toolkit/query/react'\n\nimport { ApiEndpointQuery } from '@reduxjs/toolkit/dist/query/core/module'\nimport { useEffect } from 'react'\nimport { QueryActionCreatorResult } from '@reduxjs/toolkit/dist/query/core/buildInitiate'\nimport { useSelector } from 'react-redux'\nimport { store } from '../store'\n\n/**\n * Allows running a query on a collection of data\n * @param query The RTK ApiEndpointQuery to run\n * @param params a list of params that will be run by the query\n * @returns the rtk query result (same as useGetXQuery())\n */\nexport function useQueries<\n  Q extends QueryDefinition<any, any, any, any>,\n  D extends EndpointDefinitions,\n>(\n  query: ApiEndpointQuery<Q, D>,\n  params: Parameters<typeof query['initiate']>[0][],\n) {\n  useEffect(() => {\n    const results: QueryActionCreatorResult<any>[] = params.map(param =>\n      store.dispatch(query.initiate(param as any)),\n    )\n    return () => {\n      for (const result of results) {\n        result.unsubscribe()\n      }\n    }\n  }, [query, params])\n  return useSelector(state =>\n    params.map(param => query.select(param)(state as any)),\n  )\n}\n","const SearchInput = ({\n  value,\n  options,\n  isLoading,\n  placeholder,\n  onChange,\n  onSelect,\n}: {\n  value: string\n  options: { label: string; value: string }[]\n  isLoading: boolean\n  placeholder: string\n  onChange: (value: string) => void\n  onSelect: (value: string) => void\n}) => {\n  return (\n    <>\n      <input\n        placeholder={placeholder}\n        value={value}\n        onChange={e => onChange(e.target.value)}\n      />\n      {isLoading && 'searching'}\n      <ul>\n        {options.map(option => (\n          <li key={option.value}>\n            <button onClick={() => onSelect(option.value)}>\n              {option.label}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </>\n  )\n}\n\nexport default SearchInput\n","import { useEffect, useMemo, useState } from 'react'\nimport { interestApi } from './app/services/interestApi'\nimport SearchInput from './SearchInput'\nimport { skipToken } from '@reduxjs/toolkit/query/react'\nimport debounce from 'lodash.debounce'\nimport { Interest } from './types'\n\nconst InterestSearchInput = ({\n  onSelect,\n  placeholder = 'find topic',\n}: {\n  onSelect: (interest: Interest) => void\n  placeholder?: string\n}) => {\n  const [query, setQuery] = useState('')\n\n  const [debouncedQuery, setDebouncedQuery] = useState('')\n\n  const debouncedSet = useMemo(() => debounce(setDebouncedQuery, 500), [])\n\n  useEffect(() => {\n    debouncedSet(query)\n  }, [query, debouncedSet])\n\n  const { data: interests, isLoading } =\n    interestApi.endpoints.searchInterests.useQuery(debouncedQuery || skipToken)\n\n  const handleSelect = (uri: string) => {\n    const interest = (interests ?? []).find(interest => interest.uri === uri)\n    if (!interest) throw new Error('this is a glitch')\n    onSelect(interest)\n    setQuery('')\n  }\n  return (\n    <SearchInput\n      placeholder={placeholder}\n      value={query}\n      options={((query && interests) || []).map(\n        ({ label, description, uri }) => ({\n          label: `${label}: ${description}`,\n          value: uri,\n        }),\n      )}\n      isLoading={isLoading}\n      onChange={setQuery}\n      onSelect={handleSelect}\n    />\n  )\n}\n\nexport default InterestSearchInput\n","import { FC, useMemo } from 'react'\nimport { Link } from 'react-router-dom'\nimport { interestApi } from './app/services/interestApi'\nimport { useQueries } from './app/services/useQueries'\nimport InterestSearchInput from './InterestSearchInput'\n\ninterface Props {\n  tags: string[]\n  onAddTag: (tag: string) => void\n  onRemoveTag: (tag: string) => void\n}\n\nconst EditableTagList: FC<Props> = ({ tags, onAddTag, onRemoveTag }) => {\n  const tagsToFind = useMemo(\n    () => tags.filter(uri => uri.includes('wikidata')),\n    [tags],\n  )\n\n  const tagQueries = useQueries(interestApi.endpoints.readInterest, tagsToFind)\n\n  const fetchedTags = tagQueries\n    .filter(query => query.data)\n    .map(query => query.data)\n    .filter(a => a) as { uri: string; label: string; description: string }[]\n\n  const combinedTags = tags.map(uri => {\n    const tag = fetchedTags.find(i => i.uri === uri) ?? {\n      uri,\n      label: uri.split('/').pop(),\n      description: uri,\n    }\n    return tag\n  })\n\n  return (\n    <div>\n      <ul\n        style={{\n          display: 'flex',\n          listStyleType: 'none',\n          flexWrap: 'wrap',\n          paddingLeft: 0,\n        }}\n      >\n        {combinedTags.map(tag => (\n          <li\n            style={{ margin: '10px' }}\n            key={tag.uri}\n            title={\n              tag.description.slice(0, 300) +\n              (tag.description.length > 300 ? '...' : '')\n            }\n          >\n            <Link to={`/tags/${encodeURIComponent(tag.uri)}`}>{tag.label}</Link>\n            <button\n              title={`Remove ${tag.label} from your interests`}\n              onClick={() => {\n                onRemoveTag(tag.uri)\n              }}\n            >\n              <i className=\"icon-close\" />\n            </button>\n          </li>\n        ))}\n      </ul>\n      <InterestSearchInput\n        placeholder=\"add interest\"\n        onSelect={tag => onAddTag(tag.uri)}\n      />\n    </div>\n  )\n}\n\nexport default EditableTagList\n","import { FormEventHandler, useState } from 'react'\nimport styles from './DitItemForm.module.scss'\nimport EditableTagList from './EditableTagList'\nimport { DitThingBasic, DitType, Uri } from './types'\n\nconst TYPE_OPTIONS: DitType[] = ['idea', 'problem']\n\ninterface DitThingEmptyOption extends Omit<DitThingBasic, 'type'> {\n  type: DitType | ''\n}\n\ninterface DitItemFormProps {\n  thing: DitThingEmptyOption\n  onSubmit: (data: DitThingBasic) => void\n  disabled?: boolean\n  readonlyUri?: boolean\n}\n\nconst DitItemForm = ({\n  thing,\n  onSubmit,\n  disabled = false,\n  readonlyUri = false,\n}: DitItemFormProps) => {\n  const [type, setType] = useState(thing.type)\n  const [label, setLabel] = useState(thing.label)\n  const [description, setDescription] = useState(thing.description)\n  const [tags, setTags] = useState(thing.tags)\n  const [uri, setUri] = useState(thing.uri)\n\n  const handleAddTag = (tagUri: Uri) => {\n    if (!tags.find(tag => tag === tagUri)) setTags(tags => [...tags, tagUri])\n    else {\n      console.log('tag already in list')\n    }\n  }\n\n  const handleRemoveTag = (tagUri: Uri) => {\n    if (!tags.find(tag => tag === tagUri))\n      throw new Error('tag not in list (should not happen!)')\n\n    setTags(tags => tags.filter(t => t !== tagUri))\n  }\n\n  const handleSubmit: FormEventHandler<HTMLFormElement> = e => {\n    e.preventDefault()\n    if (!type) return\n    onSubmit({ type, uri, label, description, tags })\n  }\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit}>\n      <select value={type} onChange={e => setType(e.target.value as DitType)}>\n        <option disabled value=\"\">\n          {' '}\n          -- select type --{' '}\n        </option>\n        {TYPE_OPTIONS.map(option => (\n          <option key={option}>{option}</option>\n        ))}\n      </select>\n      <input\n        type=\"text\"\n        disabled={readonlyUri}\n        value={uri}\n        onChange={e => setUri(e.target.value)}\n      />\n      <input\n        type=\"text\"\n        value={label}\n        onChange={e => setLabel(e.target.value)}\n      />\n      <textarea\n        value={description}\n        onChange={e => setDescription(e.target.value)}\n        cols={30}\n        rows={10}\n      ></textarea>\n\n      <EditableTagList\n        tags={tags}\n        onAddTag={handleAddTag}\n        onRemoveTag={handleRemoveTag}\n      />\n\n      <input type=\"submit\" value=\"Save\" disabled={disabled} />\n    </form>\n  )\n}\n\nexport default DitItemForm\n","import { solidApi } from './app/services/solidApi'\nimport { useAppSelector } from './app/hooks'\nimport { selectLogin } from './features/login/loginSlice'\nimport { skipToken } from '@reduxjs/toolkit/dist/query'\n\nconst useLoggedUser = () => {\n  const webId = useAppSelector(selectLogin).webId\n  const { data: me } = solidApi.endpoints.readPerson.useQuery(\n    webId || skipToken,\n  )\n  return me\n}\n\nexport default useLoggedUser\n","import { Navigate } from 'react-router-dom'\nimport { getDitupUri, solidApi } from './app/services/solidApi'\nimport DitItemForm from './DitItemForm'\nimport { DitThingBasic } from './types'\nimport useLoggedUser from './useLoggedUser'\n\nconst CreateDit = () => {\n  const webId = useLoggedUser()?.uri\n\n  const [createDit, { isLoading, isSuccess, data }] =\n    solidApi.endpoints.createDit.useMutation()\n\n  if (!webId) return <>Not Logged In</>\n\n  if (isSuccess && data)\n    return <Navigate to={`/items/${encodeURIComponent(data)}`} />\n\n  const handleSubmit = (thing: DitThingBasic) => {\n    createDit({ thing: { ...thing, creator: webId } })\n  }\n\n  return (\n    <div>\n      <DitItemForm\n        thing={{\n          type: '',\n          uri: `${getDitupUri(webId)}#${globalThis.crypto.randomUUID()}`,\n          label: '',\n          description: '',\n          tags: [],\n        }}\n        onSubmit={handleSubmit}\n        disabled={isLoading}\n      />\n    </div>\n  )\n}\n\nexport default CreateDit\n","import { FC } from 'react'\nimport { solidApi } from './app/services/solidApi'\nimport { Uri } from './types'\n\ninterface Props {\n  editable: boolean\n  uri: Uri\n  tags: Uri[]\n}\n\nconst DiscoverabilityAction = ({\n  editable,\n  disabled,\n  indexed,\n  tags,\n  onPublish,\n}: {\n  editable: boolean\n  disabled: boolean\n  indexed: boolean\n  tags: Uri[]\n  onPublish: () => void\n}) => {\n  // when it is not editable (not belonging to user) do nothing\n  if (!editable) return null\n  // when it is already indexed, do nothing, or allow for removing in the future (TODO)\n  if (indexed) return null\n  // when it is editable and discoverable, but not enough tags, say that they have to add some tags\n  const handleClick = () => {\n    if (tags.length === 0)\n      alert('Please add some topics first, to make this discoverable')\n    else {\n      onPublish()\n    }\n  }\n  // now, allow to be indexed\n  return (\n    <button disabled={disabled} onClick={handleClick}>\n      publish\n    </button>\n  )\n}\n\nconst Discoverability: FC<Props> = ({ editable, uri, tags }) => {\n  // @TODO here we're not entirely sure how to deal with an array of index servers, perhaps some of them readonly, and each can have different tags\n  // @TODO update the index if the tag count doesn't match\n\n  const { data } = solidApi.endpoints.readDiscoverability.useQuery(uri)\n  const [notifyIndex, { isLoading }] =\n    solidApi.endpoints.notifyIndex.useMutation()\n\n  if (!data) return null\n\n  const indexed = data.length > 0\n\n  const handlePublish = async () => {\n    notifyIndex({ uri, person: 'whatever' })\n  }\n\n  return (\n    <div>\n      {indexed ? (\n        <span>\n          <i className=\"icon-eye\" /> Indexed\n        </span>\n      ) : (\n        <span>\n          <i className=\"icon-eye-off\" /> Unlisted\n        </span>\n      )}{' '}\n      {\n        <DiscoverabilityAction\n          disabled={isLoading}\n          editable={editable}\n          indexed={indexed}\n          tags={tags}\n          onPublish={handlePublish}\n        />\n      }\n    </div>\n  )\n}\n\nexport default Discoverability\n","export default __webpack_public_path__ + \"static/media/main-image.62fd6594.png\";","import { skipToken } from '@reduxjs/toolkit/query'\nimport { useEffect, useState } from 'react'\nimport { fetchImage } from './api'\nimport { solidApi } from './app/services/solidApi'\nimport logo from './assets/main-image.png'\nimport { Uri } from './types'\nimport { Link } from 'react-router-dom'\n\nconst PersonMini = ({ uri }: { uri: Uri }) => {\n  const { data } = solidApi.endpoints.readPerson.useQuery(uri || skipToken)\n\n  const [image, setImage] = useState(logo)\n\n  useEffect(() => {\n    ;(async () => {\n      if (data?.photo) {\n        const img = await fetchImage(data.photo)\n        setImage(img)\n      }\n    })()\n  }, [data?.photo])\n\n  if (!data) return null\n\n  return (\n    <div>\n      <Link to={`/people/${encodeURIComponent(data.uri)}`}>\n        <img src={image} style={{ width: '1rem' }} /> {data.name}\n      </Link>\n    </div>\n  )\n}\n\nexport default PersonMini\n","import { FC, useMemo } from 'react'\nimport { interestApi } from './app/services/interestApi'\nimport { useQueries } from './app/services/useQueries'\nimport useLoggedUser from './useLoggedUser'\nimport listStyles from './HorizontalList.module.scss'\nimport { Link } from 'react-router-dom'\n\ninterface Props {\n  tags: string[]\n}\n\nconst TagList: FC<Props> = ({ tags }) => {\n  const tagsToFind = useMemo(\n    () => tags.filter(uri => uri.includes('wikidata')),\n    [tags],\n  )\n\n  const me = useLoggedUser()\n  const highlightedTags = me?.interests ?? []\n\n  const tagQueries = useQueries(interestApi.endpoints.readInterest, tagsToFind)\n\n  const fetchedTags = tagQueries\n    .filter(query => query.data)\n    .map(query => query.data)\n    .filter(a => a) as { uri: string; label: string; description: string }[]\n\n  const combinedTags = tags.map(uri => {\n    const tag = fetchedTags.find(i => i.uri === uri) ?? {\n      uri,\n      label: uri.split('/').pop(),\n      description: uri,\n    }\n    return tag\n  })\n\n  return (\n    <ul className={listStyles.horizontalList}>\n      {combinedTags.map(tag => (\n        <li\n          key={tag.uri}\n          title={\n            tag.description.slice(0, 300) +\n            (tag.description.length > 300 ? '...' : '')\n          }\n        >\n          <Link\n            style={{\n              color: highlightedTags.includes(tag.uri) ? 'red' : undefined,\n            }}\n            to={`/tags/${encodeURIComponent(tag.uri)}`}\n          >\n            {tag.label}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default TagList\n","import { Link } from 'react-router-dom'\nimport Discoverability from './Discoverability'\nimport styles from './DitItem.module.scss'\nimport PersonMini from './PersonMini'\nimport TagList from './TagList'\nimport { DitThing } from './types'\nimport useLoggedUser from './useLoggedUser'\n\nconst ditIcon = {\n  idea: 'icon-idea',\n  problem: 'icon-problem',\n} as const\n\nconst DitItem = ({ thing }: { thing: DitThing }) => {\n  const myself = useLoggedUser()\n  return (\n    <div className={styles.ditContainer}>\n      <header>\n        <span\n          className={styles.ditType}\n          title={thing.type}\n          aria-label={thing.type}\n        >\n          <i aria-hidden=\"true\" className={ditIcon[thing.type]} />\n        </span>{' '}\n        <Link to={`/items/${encodeURIComponent(thing.uri)}`}>\n          {thing.label}\n        </Link>{' '}\n        <a href={thing.uri}>\n          <i className=\"icon-external-link\" />\n        </a>\n      </header>\n      <section>{thing.description}</section>\n      <section>\n        <TagList tags={thing.tags} />\n      </section>\n      {thing.createdAt && (\n        <aside>Created {new Date(thing.createdAt).toDateString()}</aside>\n      )}\n      {thing.updatedAt && (\n        <aside>Updated {new Date(thing.updatedAt).toDateString()}</aside>\n      )}\n      <aside>\n        <PersonMini uri={thing.creator} />\n      </aside>\n      <aside className={styles.discoverability}>\n        <Discoverability\n          editable={myself?.uri === thing.creator}\n          tags={thing.tags}\n          uri={thing.uri}\n        />\n      </aside>\n    </div>\n  )\n}\n\nexport default DitItem\n","import { ReactNode } from 'react'\nimport Masonry from 'react-masonry-css'\nimport styles from './HorizontalList.module.scss'\n\nconst HorizontalList = ({ children }: { children: ReactNode }) => (\n  <Masonry\n    breakpointCols={{ default: 3, 600: 1, 1200: 2 }}\n    className={styles.masonryGrid}\n    columnClassName={styles.masonryGridColumn}\n  >\n    {children}\n  </Masonry>\n)\nexport default HorizontalList\n","import { FC, useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { fetchImage } from './api'\nimport logo from './assets/main-image.png'\nimport styles from './PersonSummary.module.scss'\nimport TagList from './TagList'\nimport { Person } from './types'\n\ninterface PersonSummaryProps {\n  person: Person\n}\n\nconst PersonSummary: FC<PersonSummaryProps> = ({ person }) => {\n  const [image, setImage] = useState(logo)\n\n  useEffect(() => {\n    ;(async () => {\n      if (person.photo) {\n        const img = await fetchImage(person.photo)\n        setImage(img)\n      }\n    })()\n  }, [person.photo])\n\n  return (\n    <div className={styles.container}>\n      <img className={styles.avatar} src={image} />\n      <div>\n        <Link to={`/people/${encodeURIComponent(person.uri)}`}>\n          {person.name || 'no name found'}\n        </Link>{' '}\n        <a href={person.uri}>link</a>\n      </div>\n      <TagList tags={person.interests} />\n    </div>\n  )\n}\n\nexport default PersonSummary\n","import intersection from 'lodash.intersection'\nimport { useMemo } from 'react'\nimport { useAppSelector } from './app/hooks'\nimport { ditapi } from './app/services/ditapi'\n// import { useDiscoverPeople } from './app/services/ditapi'\nimport { getDitupUri, solidApi } from './app/services/solidApi'\nimport { useQueries } from './app/services/useQueries'\nimport { indexServers } from './config'\nimport DitItem from './DitItem'\nimport { selectLogin } from './features/login/loginSlice'\nimport HorizontalList from './HorizontalList'\nimport PersonSummary from './PersonSummary'\nimport { DitThing, Person } from './types'\nimport useLoggedUser from './useLoggedUser'\n\nconst Discover = () => {\n  const webId = useAppSelector(selectLogin).webId\n  /* stream version (results show up sooner, but not connected to rtk-query)\n  const { data: discoveredPeople, isLoading } = useDiscoverPeople(webId)\n  // */\n\n  //* async version\n  const { data: discoveredPeople, isLoading } =\n    ditapi.endpoints.discoverPeople.useQuery(webId)\n  // */\n  const discoveredPeopleUris = useMemo(\n    () => (discoveredPeople ?? []).map(person => person.uri),\n    // () => (discoveredPeople ?? []).map(person => person.person),\n    [discoveredPeople],\n  )\n\n  const personQueries = useQueries(\n    solidApi.endpoints.readPerson,\n    discoveredPeopleUris,\n  )\n\n  /* discover dit things related to current user by interest */\n  const { data: discoveredDits, isLoading: isDiscoveringDits } =\n    ditapi.endpoints.discoverDits.useQuery(webId)\n\n  const discoveredDitUris = useMemo(\n    () => (discoveredDits ?? []).map(thing => thing.uri),\n    // () => (discoveredPeople ?? []).map(person => person.person),\n    [discoveredDits],\n  )\n\n  const { data: myDits } = solidApi.endpoints.readDitItems.useQuery(\n    getDitupUri(webId),\n  )\n\n  const ditQueries = useQueries(\n    solidApi.endpoints.readDitItem,\n    discoveredDitUris,\n  )\n\n  const me = useLoggedUser()\n\n  if (!me || !myDits) return <>Loading self...</>\n\n  if (indexServers.length === 0)\n    return (\n      <div>\n        No index servers were configured. You&apos;ll find nothing here.\n      </div>\n    )\n\n  const fetchedPeople = personQueries\n    .filter(query => query.data)\n    .map(query => query.data)\n    .filter(a => a) as Person[]\n\n  const fetchedDits = ditQueries\n    .filter(query => query.data)\n    .map(query => query.data)\n    .filter(a => a) as DitThing[]\n\n  const peopleInCommon = fetchedPeople\n    .map(\n      person => [person, countMatch(person.interests, me.interests)] as const,\n    )\n    .sort((a, b) => b[1] - a[1])\n    .filter(a => !!a[1])\n\n  const myDitUris = myDits.map(dit => dit.uri)\n  const ditsInCommon = fetchedDits\n    .filter(dit => !myDitUris.includes(dit.uri))\n    .map(thing => [thing, countMatch(thing.tags, me.interests)] as const)\n    .sort((a, b) => b[1] - a[1])\n    .filter(a => !!a[1])\n\n  return (\n    <div>\n      {(isLoading ||\n        personQueries.find(\n          query => query.isLoading || query.isUninitialized,\n        )) && <div>Searching People...</div>}\n      {(isDiscoveringDits ||\n        ditQueries.find(query => query.isLoading || query.isUninitialized)) && (\n        <div>Searching Dits...</div>\n      )}\n      <HorizontalList>\n        {peopleInCommon.map(([person, match]) => (\n          <div key={person.uri}>\n            <PersonSummary person={person} />{' '}\n            <span>match: {Math.round(match * 1000) / 10}%</span>\n          </div>\n        ))}\n        {ditsInCommon.map(([thing, match]) => (\n          <div key={thing.uri}>\n            <DitItem thing={thing} />{' '}\n            <span>match: {Math.round(match * 1000) / 10}%</span>\n          </div>\n        ))}\n      </HorizontalList>\n    </div>\n  )\n}\n\nexport default Discover\n\nconst countMatch = (a: unknown[], b: unknown[]): number => {\n  const common = intersection(a, b)\n  return common.length && common.length / (a.length * b.length) ** 0.5\n}\n","import { skipToken } from '@reduxjs/toolkit/query'\nimport { Link, Navigate, useParams } from 'react-router-dom'\nimport { solidApi } from './app/services/solidApi'\nimport DitItem from './DitItem'\n\nconst DitItemPage = () => {\n  const { itemUri } = useParams<'itemUri'>()\n\n  const { data, isLoading, isUninitialized } =\n    solidApi.endpoints.readDitItem.useQuery(itemUri ?? skipToken)\n\n  const [removeDit, { isLoading: isRemoving, isSuccess }] =\n    solidApi.endpoints.removeDit.useMutation()\n\n  if (isSuccess) return <Navigate to=\"/\" />\n\n  if (!itemUri) return <>No Content...</>\n  if (isLoading || isUninitialized) return <div>Loading...</div>\n  if (!data) return <div>Not Found</div>\n\n  return (\n    <>\n      <DitItem thing={data} />\n      <aside>\n        <Link to={`/items/${encodeURIComponent(itemUri)}/edit`}>Edit</Link>{' '}\n        <button disabled={isRemoving} onClick={() => removeDit(itemUri)}>\n          DANGER: Remove\n        </button>\n      </aside>\n    </>\n  )\n}\n\nexport default DitItemPage\n","import { skipToken } from '@reduxjs/toolkit/query'\nimport { useAppSelector } from './app/hooks'\nimport { getDitupUri, solidApi } from './app/services/solidApi'\nimport DitItem from './DitItem'\nimport { selectLogin } from './features/login/loginSlice'\nimport HorizontalList from './HorizontalList'\n\nconst DitList = () => {\n  const { webId } = useAppSelector(selectLogin)\n  const { data, isLoading, isUninitialized } =\n    solidApi.endpoints.readDitItems.useQuery(\n      webId ? getDitupUri(webId) : skipToken,\n    )\n  if (isLoading || isUninitialized || !data) return <div>Loading...</div>\n\n  return (\n    <HorizontalList>\n      {data.map(thing => (\n        <div key={thing.uri}>\n          <DitItem thing={thing} />\n        </div>\n      ))}\n    </HorizontalList>\n  )\n}\n\nexport default DitList\n","import { skipToken } from '@reduxjs/toolkit/query'\nimport { Navigate, useParams } from 'react-router-dom'\nimport { useAppSelector } from './app/hooks'\nimport { solidApi } from './app/services/solidApi'\nimport DitItemForm from './DitItemForm'\nimport { selectLogin } from './features/login/loginSlice'\nimport { DitThingBasic } from './types'\nimport useLoggedUser from './useLoggedUser'\n\nconst EditDitPage = () => {\n  const webId = useAppSelector(selectLogin).webId\n  const { itemUri } = useParams<'itemUri'>()\n  const personUri = useLoggedUser()?.uri\n  const { data: discoverableTags } =\n    solidApi.endpoints.readDiscoverability.useQuery(itemUri ?? skipToken)\n\n  const { data, isLoading, isUninitialized } =\n    solidApi.endpoints.readDitItem.useQuery(itemUri ?? skipToken)\n\n  const [updateDit, { isLoading: isUpdating, isSuccess }] =\n    solidApi.endpoints.updateDit.useMutation()\n\n  const [notifyIndex] = solidApi.endpoints.notifyIndex.useMutation()\n\n  if (!personUri) return <>Not Signed In</>\n\n  if (isSuccess && data)\n    return <Navigate to={`/items/${encodeURIComponent(data.uri)}`} />\n\n  if (!itemUri) return <>No Content...</>\n  if (isLoading || isUninitialized) return <div>Loading...</div>\n  if (!data) return <div>Not Found</div>\n\n  const handleSubmit = async (thing: DitThingBasic) => {\n    await updateDit({ thing: { ...thing, creator: webId } })\n    if (discoverableTags?.length ?? 0 > 0)\n      await notifyIndex({ uri: thing.uri, person: personUri })\n  }\n\n  return (\n    <DitItemForm\n      thing={data}\n      onSubmit={handleSubmit}\n      disabled={isUpdating}\n      readonlyUri\n    />\n  )\n}\n\nexport default EditDitPage\n","export default __webpack_public_path__ + \"static/media/logo-white.d49770e9.svg\";","import { skipToken } from '@reduxjs/toolkit/dist/query'\nimport { Link } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from './app/hooks'\nimport { solidApi } from './app/services/solidApi'\nimport { logout, selectLogin } from './features/login/loginSlice'\nimport styles from './Header.module.scss'\nimport logo from './assets/logo-white.svg'\n\nconst Header = () => {\n  const webId = useAppSelector(selectLogin).webId\n  const dispatch = useAppDispatch()\n\n  const { data } = solidApi.endpoints.readPerson.useQuery(webId || skipToken)\n\n  return (\n    <header className={styles.header}>\n      <Link className={styles.homeLink} to=\"/\">\n        <img className={styles.logo} src={logo} alt=\"ditup logo\" /> ditup\n      </Link>\n      <span className={styles.separator} />\n      <Link to=\"/discover\">Discover</Link>\n      <Link to=\"/create\">Create</Link>\n      <Link to=\"/people/me\">{!data ? webId : data.name}</Link>\n      <button onClick={() => dispatch(logout())}>log out</button>\n    </header>\n  )\n}\n\nexport default Header\n","import { FormEventHandler, useState } from 'react'\nimport { useAppDispatch } from '../../app/hooks'\nimport { login } from './loginSlice'\n\nconst Login = () => {\n  const [provider, setProvider] = useState('')\n  const dispatch = useAppDispatch()\n  const handleSubmit: FormEventHandler<HTMLFormElement> = async e => {\n    e.preventDefault()\n    dispatch(login(provider))\n  }\n\n  return (\n    <div>\n      <header>Log in with your Solid identity</header>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          value={provider}\n          onChange={e => setProvider(e.target.value)}\n          list=\"providers\"\n        />\n        <datalist id=\"providers\">\n          <option value=\"https://solidcommunity.net\">Solid Community</option>\n          <option value=\"https://inrupt.net\">Inrupt</option>\n        </datalist>\n        <input type=\"submit\" value=\"Log in\" disabled={!provider} />\n      </form>\n    </div>\n  )\n}\n\nexport default Login\n","import { Link } from 'react-router-dom'\nimport Login from './features/login/Login'\nimport logo from './assets/main-image.png'\nimport styles from './Homepage.module.scss'\n\nconst Homepage = () => (\n  <div className={styles.page}>\n    <div className={styles.wrapper}>\n      <header>\n        <h1>ditup</h1>\n        <p>do it together!</p>\n      </header>\n\n      <img className={styles.homeImage} src={logo} alt=\"mushroom\" />\n\n      <nav>\n        <Login />\n        <Link to=\"/signup\">\n          <small>Get started with Solid?</small>\n        </Link>\n      </nav>\n    </div>\n  </div>\n)\n\nexport default Homepage\n","import { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { fetchImage } from './api'\nimport { useAppSelector } from './app/hooks'\nimport { solidApi } from './app/services/solidApi'\nimport logo from './assets/main-image.png'\nimport Discoverability from './Discoverability'\nimport EditableTagList from './EditableTagList'\nimport { selectLogin } from './features/login/loginSlice'\nimport TagList from './TagList'\n\nconst Person = () => {\n  const personId = useParams<'personId'>().personId as string\n  const loginUri = useAppSelector(selectLogin).webId\n  const personUri = personId === 'me' ? loginUri : personId\n  const { data, isLoading } = solidApi.endpoints.readPerson.useQuery(personUri)\n  const [addInterest] = solidApi.endpoints.addInterest.useMutation()\n  const [removeInterest] = solidApi.endpoints.removeInterest.useMutation()\n  const [notifyIndex] = solidApi.endpoints.notifyIndex.useMutation()\n  const { data: discoverableTags } =\n    solidApi.endpoints.readDiscoverability.useQuery(personUri)\n\n  const [image, setImage] = useState(logo)\n\n  const isMe = personUri === loginUri\n\n  useEffect(() => {\n    ;(async () => {\n      if (data?.photo) {\n        const img = await fetchImage(data.photo)\n        setImage(img)\n      }\n    })()\n  }, [data?.photo])\n\n  if (!data) return <div>Loading...</div>\n\n  const handleAddTag = async (interest: string) => {\n    await addInterest({ uri: personUri, interest })\n    // update index only if the person is already indexed\n    if (discoverableTags?.length ?? 0 > 0)\n      await notifyIndex({ uri: personUri, person: personUri })\n  }\n  const handleRemoveTag = async (interest: string) => {\n    await removeInterest({ uri: personUri, interest })\n    // update index only if the person is already indexed\n    if (discoverableTags?.length ?? 0 > 0)\n      await notifyIndex({ uri: personUri, person: personUri })\n  }\n\n  const Tags = isMe ? EditableTagList : TagList\n\n  return (\n    <div>\n      <img src={image} style={{ width: '10rem' }} />\n      <div>\n        {isLoading ? '...' : data.name ?? ''}{' '}\n        <a\n          href={personUri}\n          title={`Go directly to ${data.name || 'this person'}'s Solid Profile`}\n          aria-label={`Go directly to ${\n            data.name || 'this person'\n          }'s Solid Profile`}\n        >\n          <i aria-hidden=\"true\" className=\"icon-external-link\" />\n        </a>\n      </div>\n      <Tags\n        tags={data.interests}\n        onAddTag={handleAddTag}\n        onRemoveTag={handleRemoveTag}\n      />\n      {isMe && (\n        <a\n          href={`https://www.interesting.chat/?interests=${encodeURIComponent(\n            data.interests\n              .filter(uri => uri.includes('wikidata'))\n              .map(uri => uri.split('/').pop())\n              .join(','),\n          )}`}\n        >\n          Chat with a stranger about your interests\n        </a>\n      )}\n      <Discoverability\n        uri={personUri}\n        tags={data.interests}\n        editable={personUri === loginUri}\n      />\n    </div>\n  )\n}\n\nexport default Person\n","const Signup = () => <div>Info how to get started with Solid</div>\n\nexport default Signup\n","import { skipToken } from '@reduxjs/toolkit/dist/query'\nimport { useParams } from 'react-router-dom'\nimport { interestApi } from './app/services/interestApi'\n\nconst TagPage = () => {\n  const tagUri = useParams<'tagUri'>().tagUri\n\n  const { data, isLoading, isUninitialized } =\n    interestApi.endpoints.readInterest.useQuery(tagUri || skipToken)\n\n  if (isLoading || isUninitialized) return <>Loading...</>\n\n  if (!data) return <>No data</>\n\n  return (\n    <div>\n      {data.image && (\n        <img\n          style={{\n            float: 'right',\n            width: '20em',\n            maxWidth: '40vw',\n            margin: '-1.34rem 0 0 0',\n          }}\n          src={data.image}\n          alt={`Image of ${data.label}`}\n        />\n      )}\n      <header>\n        <h1>{data.label}</h1>\n        <p>{data.aliases.join(' • ')}</p>\n        <small>\n          <a href={data.uri}>{data.uri}</a>\n        </small>\n        {data.officialWebsite && (\n          <p>\n            website: <a href={data.officialWebsite}>{data.officialWebsite}</a>\n          </p>\n        )}\n      </header>\n      <section style={{ backgroundColor: 'pink' }}>{data.description}</section>\n    </div>\n  )\n}\n\nexport default TagPage\n","import { onSessionRestore } from '@inrupt/solid-client-authn-browser'\nimport { useNavigate } from 'react-router-dom'\nimport './App.css'\n\nconst usePreviousUriAfterSolidRedirect = () => {\n  const navigate = useNavigate()\n\n  onSessionRestore(url => {\n    navigate(new URL(url).pathname)\n  })\n}\n\nexport default usePreviousUriAfterSolidRedirect\n","import { Route, Routes } from 'react-router-dom'\nimport './App.css'\nimport { useAppSelector } from './app/hooks'\nimport CreateDit from './CreateDit'\nimport Discover from './Discover'\nimport DitItemPage from './DitItemPage'\nimport DitList from './DitList'\nimport EditDitPage from './EditDitPage'\nimport { selectLogin } from './features/login/loginSlice'\nimport Header from './Header'\nimport Homepage from './Homepage'\nimport Person from './Person'\nimport Signup from './Signup'\nimport TagPage from './TagPage'\nimport usePreviousUri from './usePreviousUriAfterSolidRedirect'\n\nfunction App() {\n  usePreviousUri()\n\n  const login = useAppSelector(selectLogin)\n\n  if (login.status === 'loading') return <div>initializing</div>\n\n  if (!login.isLoggedIn)\n    return (\n      <div>\n        <Routes>\n          <Route path=\"*\" element={<Homepage />} />\n          <Route path=\"/signup\" element={<Signup />} />\n        </Routes>\n      </div>\n    )\n  return (\n    <div>\n      <Header />\n      <Routes>\n        <Route path=\"/\" element={<DitList />} />\n        <Route path=\"/discover\" element={<Discover />} />\n        <Route path=\"/people/:personId\" element={<Person />} />\n        <Route path=\"/create\" element={<CreateDit />} />\n        <Route path=\"/items/:itemUri\" element={<DitItemPage />} />\n        <Route path=\"/items/:itemUri/edit\" element={<EditDitPage />} />\n        <Route path=\"/tags/:tagUri\" element={<TagPage />} />\n      </Routes>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App'\nimport { store } from './app/store'\nimport { init } from './features/login/loginSlice'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\n\n// initialize application once at the beginning\nstore.dispatch(init())\n\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nconst root = createRoot(document.getElementById('root')!)\n\nroot.render(\n  <StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </StrictMode>,\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}