(this.webpackJsonpditapp=this.webpackJsonpditapp||[]).push([[0],{116:function(e,t,n){e.exports={horizontalList:"HorizontalList_horizontalList__1L95r"}},136:function(e,t,n){e.exports={header:"Header_header__34Mnk",homeLink:"Header_homeLink__2Plqh",logo:"Header_logo__3Vr_I",separator:"Header_separator__jCo-_"}},154:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(5),i=n(0),c=n.n(i),a=n(57),o=function(){var t=Object(r.a)(c.a.mark((function t(n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(a.fetch)(n);case 2:return r=t.sent,t.t0="data:".concat(r.headers.get("content-type"),";base64,"),t.t1=e,t.next=7,r.arrayBuffer();case 7:return t.t2=t.sent,t.t3=t.t1.from.call(t.t1,t.t2).toString("base64"),i=t.t0.concat.call(t.t0,t.t3),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).call(this,n(43).Buffer)},156:function(e,t,n){e.exports={page:"Homepage_page__3ASb0",wrapper:"Homepage_wrapper__yr9nO",homeImage:"Homepage_homeImage__1og7O"}},195:function(e,t,n){e.exports={container:"PersonSummary_container__niwwK",avatar:"PersonSummary_avatar__1cKL_"}},326:function(e,t,n){e.exports={form:"DitItemForm_form__PfJgE"}},333:function(e,t,n){},334:function(e,t,n){},387:function(e,t){},423:function(e,t){},424:function(e,t){},498:function(e,t){},500:function(e,t){},544:function(e,t){},546:function(e,t){},562:function(e,t){},564:function(e,t){},885:function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r),c=n(150),a=n.n(c),o=(n(333),n(23)),s=(n(334),n(41)),u=function(){return Object(s.d)()},d=s.e,l=n(13),j=n(15),b=n(9),f=n(5),p=n(0),h=n.n(p),O=n(33),v=n(57),m=n(96),g=n(34),x={idea:"https://ditup.example#Idea",problem:"https://ditup.example#Problem"},y=JSON.parse(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_INDEX_SERVERS||"[]"),w=Object(m.a)({reducerPath:"solidapi",baseQuery:function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,i,c,a,o,s,u,d,f,p,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uri,i=t.data,c=t.fetchProperties,a=t.fetchAll,o=void 0!==a&&a,e.prev=1,e.next=4,Object(O.d)(r,{fetch:v.fetch});case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s=Object(O.b)();case 10:if(null!==i&&void 0!==i&&i.remove&&i.remove.forEach((function(e){var t,n,r=Object(l.a)(e,3),i=r[0],c=r[1],a=r[2],o=Object(O.g)(null!==(t=u)&&void 0!==t?t:s,i);if(o)if("*"===c)u=Object(O.k)(null!==(n=u)&&void 0!==n?n:s,o);else if("*"===a){var d,j=Object(O.j)(o,c);u=Object(O.o)(null!==(d=u)&&void 0!==d?d:s,j)}else{var b,f=Object(O.l)(o,c,a);u=Object(O.o)(null!==(b=u)&&void 0!==b?b:s,f)}})),null!==i&&void 0!==i&&i.setString&&i.setString.forEach((function(e){var t,n,r=Object(l.a)(e,3),i=r[0],c=r[1],a=r[2],o=null!==(t=Object(O.g)(null!==(n=u)&&void 0!==n?n:s,i))&&void 0!==t?t:Object(O.c)({url:i});if(o){var d,j=Object(O.n)(o,c,a,"en");u=Object(O.o)(null!==(d=u)&&void 0!==d?d:s,j)}})),null!==i&&void 0!==i&&i.set&&i.set.forEach((function(e){var t,n,r=Object(l.a)(e,3),i=r[0],c=r[1],a=r[2],o=null!==(t=Object(O.g)(null!==(n=u)&&void 0!==n?n:s,i))&&void 0!==t?t:Object(O.c)({url:i});if(o){var d,j=Object(O.p)(o,c,a);u=Object(O.o)(null!==(d=u)&&void 0!==d?d:s,j)}})),null!==i&&void 0!==i&&i.add&&i.add.forEach((function(e){var t,n,r,i=Object(l.a)(e,3),c=i[0],a=i[1],o=i[2],d=null!==(t=Object(O.g)(null!==(n=u)&&void 0!==n?n:s,c))&&void 0!==t?t:Object(O.c)({url:c}),j=Object(O.a)(d,a,o);u=Object(O.o)(null!==(r=u)&&void 0!==r?r:s,j)})),!u){e.next=17;break}return e.next=17,Object(O.m)(r,u,{fetch:v.fetch});case 17:if(d=o?Object(O.h)(null!==(p=u)&&void 0!==p?p:s):[Object(O.g)(null!==(f=u)&&void 0!==f?f:s,r)].filter((function(e){return!!e})),m=d.map((function(e){return Object(b.a)(Object(b.a)({},Object.fromEntries(Object.entries(c).map((function(t){var n=Object(l.a)(t,2),r=n[0],i=n[1];return[r,[].concat(Object(j.a)(Object(O.i)(e,i)),Object(j.a)(Object(O.e)(e,i)),Object(j.a)(Object(O.f)(e,i)))]})))),{},{uri:[e.url]})})),o||0!==m.length||(null!==(n=null===i||void 0===i?void 0:i.remove)&&void 0!==n?n:[]).find((function(e){return"*"===Object(l.a)(e,2)[1]}))){e.next=21;break}return e.abrupt("return",{error:{message:"thing not found"}});case 21:return e.abrupt("return",{data:m});case 22:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),tagTypes:["Person","DitThing"],endpoints:function(e){return{readPerson:e.query({query:function(e){return{uri:e,fetchProperties:{name:g.c.name,photo:g.f.hasPhoto,interests:g.c.topic_interest}}},providesTags:function(e,t,n){return[{type:"Person",id:n}]},transformResponse:function(e){var t,n,r=Object(l.a)(e,1)[0],i=r.uri,c=r.name,a=r.photo,o=r.interests;return{uri:i[0],name:null!==(t=c[0])&&void 0!==t?t:"",photo:null!==(n=a[0])&&void 0!==n?n:"",interests:o}}}),readDitItem:e.query({query:function(e){return{uri:e,fetchProperties:{type:g.d.type,label:g.e.label,description:g.b.description,tags:g.a.tag}}},transformResponse:function(e){var t,n=Object(l.a)(e,1)[0],r=n.uri,i=n.type,c=n.label,a=n.description,o=n.tags;return{uri:r[0],type:null!==(t=Object.keys(x).find((function(e){return x[e]===i[0]})))&&void 0!==t?t:"idea",label:c[0],description:a[0],tags:o}},providesTags:function(e,t,n){return[{type:"DitThing",id:n}]}}),readDitItems:e.query({query:function(e){return{uri:e,fetchAll:!0,fetchProperties:{type:g.d.type,label:g.e.label,description:g.b.description,tags:g.a.tag}}},transformResponse:function(e){return e.map((function(e){var t=e.uri,n=e.type,r=e.label,i=e.description,c=e.tags;return{uri:t[0],type:Object.keys(x).find((function(e){return n.includes(x[e])})),label:r[0],description:i[0],tags:c}})).filter((function(e){return"undefined"!==typeof e.type}))},providesTags:function(e){return(null!==e&&void 0!==e?e:[]).map((function(e){return{type:"DitThing",id:e.uri}}))}}),addInterest:e.mutation({query:function(e){var t=e.uri,n=e.interest;return{uri:t,data:{add:[[t,g.c.topic_interest,n]]},fetchProperties:{interests:g.c.topic_interest}}},invalidatesTags:function(e,t,n){return[{type:"Person",id:n.uri}]}}),removeInterest:e.mutation({query:function(e){var t=e.uri,n=e.interest;return{uri:t,data:{remove:[[t,g.c.topic_interest,n]]},fetchProperties:{interests:g.c.topic_interest}}},invalidatesTags:function(e,t,n){return[{type:"Person",id:n.uri}]}}),createDit:e.mutation({query:function(e){var t=e.thing;return{uri:t.uri,data:{add:[[t.uri,g.d.type,x[t.type]]].concat(Object(j.a)(t.tags.map((function(e){return[t.uri,g.a.tag,e]})))),setString:[[t.uri,g.e.label,t.label],[t.uri,g.b.description,t.description]]},fetchProperties:{}}},transformResponse:function(e){var t=Object(l.a)(e,1);return Object(l.a)(t[0].uri,1)[0]}}),updateDit:e.mutation({query:function(e){var t=e.thing;return{uri:t.uri,data:{set:[[t.uri,g.d.type,x[t.type]]],remove:[[t.uri,g.a.tag,"*"]],add:t.tags.map((function(e){return[t.uri,g.a.tag,e]})),setString:[[t.uri,g.e.label,t.label],[t.uri,g.b.description,t.description]]},fetchProperties:{}}},transformResponse:function(e){var t=Object(l.a)(e,1);return Object(l.a)(t[0].uri,1)[0]},invalidatesTags:function(e,t,n){return[{type:"DitThing",id:n.thing.uri}]}}),removeDit:e.mutation({query:function(e){return{uri:e,data:{remove:[[e,"*","*"]]},fetchProperties:{}}},invalidatesTags:function(e,t,n){return[{type:"DitThing",id:n}]}})}}}),I=function(e){var t,n=null===(t=/^(https?:\/\/.*)\/profile\/card#me$/g.exec(e))||void 0===t?void 0:t[1];if(!n)throw new Error("unable to generate hospex uri from webId");return n+"/public/ditup.ttl"},S=n(326),_=n.n(S),k=n(38),E=n(79),P=n(42),T=["concepturi"],L=Object(m.a)({reducerPath:"interestapi",baseQuery:Object(P.d)({baseUrl:"https://www.wikidata.org/w/"}),tagTypes:["Interest"],endpoints:function(e){return{searchInterests:e.query({query:function(e){return{url:"api.php?action=wbsearchentities&search=".concat(encodeURIComponent(e),"&language=en&limit=20&continue=0&format=json&uselang=en&type=item&origin=*")}},transformResponse:function(e){return e.search.map((function(e){var t=e.concepturi,n=Object(E.a)(e,T);return Object(b.a)({uri:t},n)}))},providesTags:function(e,t,n){return[{type:"Interest",id:"QUERY_STRING_"+n}]}}),readInterest:e.query({query:function(e){var t,n,r=null!==(t=null===(n=e.match(C))||void 0===n?void 0:n[2])&&void 0!==t?t:"";return{url:"api.php?action=wbgetentities&ids=".concat(r,"&languages=en&format=json&origin=*")}},transformResponse:function(e,t,n){var r,i,c,a,o,s,u,d=Object.values(e.entities)[0];if(!d)throw new Error("entity not found");var l=null!==(r=null===(i=d.labels.en)||void 0===i?void 0:i.value)&&void 0!==r?r:"",j=null!==(c=null===(a=d.descriptions.en)||void 0===a?void 0:a.value)&&void 0!==c?c:"",b=(null!==(o=d.claims.P18)&&void 0!==o?o:[]).map((function(e){return e.mainsnak.datavalue.value}))[0],f=b&&"https://commons.wikimedia.org/wiki/Special:FilePath/".concat(encodeURIComponent(b),"?width=300"),p=(null!==(s=d.claims.P856)&&void 0!==s?s:[]).map((function(e){return e.mainsnak.datavalue.value}))[0];return{uri:n,label:l,aliases:(null!==(u=d.aliases.en)&&void 0!==u?u:[]).map((function(e){return e.value})),description:j,officialWebsite:p,image:f}},providesTags:function(e,t,n){return[{type:"Interest",id:n}]}})}}}),C=/^https?:\/\/(w{3}\.)?wikidata\.org\/entity\/([A-Z0-9]*)\/?$/,R=n(31),U=n(28),D=n(14),N=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.login)({oidcIssuer:t,redirectUrl:globalThis.location.href,clientName:"ditup"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.handleIncomingRedirect)({url:globalThis.location.href,restorePreviousSession:!0});case 2:return e.abrupt("return",Object(v.getDefaultSession)().info);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=Object(D.createAsyncThunk)("login/login",N),A=Object(D.createAsyncThunk)("login/init",q),Q=Object(D.createAsyncThunk)("login/logout",v.logout),H=Object(D.createSlice)({name:"login",initialState:{webId:"",isLoggedIn:!1,status:"loading"},reducers:{},extraReducers:function(e){e.addCase(F.pending,(function(e){e.status="loading"})).addCase(F.fulfilled,(function(e){e.status="idle",e.isLoggedIn=!0})).addCase(F.rejected,(function(e,t){e.status="failed",alert(t.error.message)})).addCase(A.pending,(function(e){e.status="loading"})).addCase(A.fulfilled,(function(e,t){var n,r;e.status="idle",e.isLoggedIn=t.payload.isLoggedIn,e.webId=null!==(n=null===(r=t.payload)||void 0===r?void 0:r.webId)&&void 0!==n?n:""})).addCase(Q.fulfilled,(function(e){e.status="idle",e.isLoggedIn=!1,e.webId=""}))}}),M=function(e){return e.login},W=H.reducer,z=n(153),B=new z.QueryEngine,X=function(e,t){var n=Object(r.useState)([]),i=Object(l.a)(n,2),c=i[0],a=i[1],o=Object(r.useState)([]),s=Object(l.a)(o,2),u=s[0],d=s[1],b=Object(r.useState)(!1),p=Object(l.a)(b,2),O=p[0],v=p[1];return Object(r.useEffect)((function(){Object(f.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a([]),n.next=3,B.queryBindings(e,{sources:t,lenient:!0});case 3:r=n.sent,v(!0),r.on("data",(function(e){var t=Object(j.a)(e.keys()).map((function(e){return e.value})),n=Object.fromEntries(t.map((function(t){var n,r;return[t,null!==(n=null===(r=e.get(t))||void 0===r?void 0:r.value)&&void 0!==n?n:null]})));a((function(e){return[].concat(Object(j.a)(e),[n])}))})),r.on("error",(function(e){console.error(e),d((function(t){return[].concat(Object(j.a)(t),[e])}))})),r.on("end",(function(){v(!1)}));case 8:case"end":return n.stop()}}),n)})))()}),[e,t]),[u,c,O]};console.log(y);var K,G=new z.QueryEngine,J=Object(m.a)({reducerPath:"ditapi",baseQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseSources:[]},t=e.baseSources;return function(){var e=Object(f.a)(h.a.mark((function e(n){var r,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query,i=n.sources,e.next=3,G.queryBindings(r,{sources:[].concat(Object(j.a)(t),Object(j.a)(i)),fetch:v.fetch});case 3:return c=e.sent,e.next=6,c.toArray();case 6:return e.t0=e.sent.map((function(e){var t=Object(j.a)(e.keys()).map((function(e){return e.value}));return Object.fromEntries(t.map((function(t){var n,r;return[t,null!==(n=null===(r=e.get(t))||void 0===r?void 0:r.value)&&void 0!==n?n:null]})))})),e.abrupt("return",{data:e.t0});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(),endpoints:function(e){return{getUser:e.query({query:function(e){return{query:"\n      PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n      PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>\n      SELECT ?name ?photo WHERE {\n        <".concat(e,"> foaf:name ?name.\n        OPTIONAL {<").concat(e,"> vcard:hasPhoto ?photo.}\n      }"),sources:[e]}},transformResponse:function(e){return e[0]}})}}}),V=Object(D.configureStore)({reducer:(K={login:W},Object(U.a)(K,J.reducerPath,J.reducer),Object(U.a)(K,w.reducerPath,w.reducer),Object(U.a)(K,L.reducerPath,L.reducer),K),middleware:function(e){return e().concat(J.middleware).concat(w.middleware).concat(L.middleware)}});function Y(e,t){return Object(r.useEffect)((function(){var n=t.map((function(t){return V.dispatch(e.initiate(t))}));return function(){var e,t=Object(R.a)(n);try{for(t.s();!(e=t.n()).done;){e.value.unsubscribe()}}catch(r){t.e(r)}finally{t.f()}}}),[e,t]),Object(s.e)((function(n){return t.map((function(t){return e.select(t)(n)}))}))}var $=n(7),Z=function(e){var t=e.value,n=e.options,r=e.isLoading,i=e.onChange,c=e.onSelect;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("input",{value:t,onChange:function(e){return i(e.target.value)}}),r&&"searching",Object($.jsx)("ul",{children:n.map((function(e){return Object($.jsx)("li",{children:Object($.jsx)("button",{onClick:function(){return c(e.value)},children:e.label})},e.value)}))})]})},ee=n(328),te=n.n(ee),ne=function(e){var t=e.onSelect,n=Object(r.useState)(""),i=Object(l.a)(n,2),c=i[0],a=i[1],o=Object(r.useState)(""),s=Object(l.a)(o,2),u=s[0],d=s[1],j=Object(r.useMemo)((function(){return te()(d,500)}),[]);Object(r.useEffect)((function(){j(c)}),[c,j]);var b=L.endpoints.searchInterests.useQuery(u||P.f),f=b.data,p=b.isLoading;return Object($.jsx)(Z,{value:c,options:(c&&f||[]).map((function(e){var t=e.label,n=e.description,r=e.uri;return{label:"".concat(t,": ").concat(n),value:r}})),isLoading:p,onChange:a,onSelect:function(e){var n=(null!==f&&void 0!==f?f:[]).find((function(t){return t.uri===e}));if(!n)throw new Error("this is a glitch");t(n),a("")}})},re=function(e){var t=e.tags,n=e.onAddTag,i=e.onRemoveTag,c=Object(r.useMemo)((function(){return t.filter((function(e){return e.includes("wikidata")}))}),[t]),a=Y(L.endpoints.readInterest,c).filter((function(e){return e.data})).map((function(e){return e.data})).filter((function(e){return e})),o=t.map((function(e){var t;return null!==(t=a.find((function(t){return t.uri===e})))&&void 0!==t?t:{uri:e,label:e.split("/").pop(),description:e}}));return Object($.jsxs)("div",{children:[Object($.jsx)("ul",{style:{display:"flex",listStyleType:"none",flexWrap:"wrap",paddingLeft:0},children:o.map((function(e){return Object($.jsxs)("li",{style:{margin:"10px"},title:e.description.slice(0,300)+(e.description.length>300?"...":""),children:[Object($.jsx)(k.b,{to:"/tags/".concat(encodeURIComponent(e.uri)),children:e.label}),Object($.jsx)("button",{onClick:function(){i(e.uri)},children:"remove"})]},e.uri)}))}),Object($.jsx)(ne,{onSelect:function(e){return n(e.uri)}})]})},ie=["idea","problem"],ce=function(e){var t=e.thing,n=e.onSubmit,i=e.disabled,c=void 0!==i&&i,a=e.readonlyUri,o=void 0!==a&&a,s=Object(r.useState)(t.type),u=Object(l.a)(s,2),d=u[0],b=u[1],f=Object(r.useState)(t.label),p=Object(l.a)(f,2),h=p[0],O=p[1],v=Object(r.useState)(t.description),m=Object(l.a)(v,2),g=m[0],x=m[1],y=Object(r.useState)(t.tags),w=Object(l.a)(y,2),I=w[0],S=w[1],k=Object(r.useState)(t.uri),E=Object(l.a)(k,2),P=E[0],T=E[1];return Object($.jsxs)("form",{className:_.a.form,onSubmit:function(e){e.preventDefault(),d&&n({type:d,uri:P,label:h,description:g,tags:I})},children:[Object($.jsxs)("select",{value:d,defaultValue:"",onChange:function(e){return b(e.target.value)},children:[Object($.jsxs)("option",{disabled:!0,value:"",children:[" ","-- select type --"," "]}),ie.map((function(e){return Object($.jsx)("option",{children:e},e)}))]}),Object($.jsx)("input",{type:"text",disabled:o,value:P,onChange:function(e){return T(e.target.value)}}),Object($.jsx)("input",{type:"text",value:h,onChange:function(e){return O(e.target.value)}}),Object($.jsx)("textarea",{value:g,onChange:function(e){return x(e.target.value)},cols:30,rows:10}),Object($.jsx)(re,{tags:I,onAddTag:function(e){I.find((function(t){return t===e}))?console.log("tag already in list"):S((function(t){return[].concat(Object(j.a)(t),[e])}))},onRemoveTag:function(e){if(!I.find((function(t){return t===e})))throw new Error("tag not in list (should not happen!)");S((function(t){return t.filter((function(t){return t!==e}))}))}}),Object($.jsx)("input",{type:"submit",value:"Save",disabled:c})]})},ae=function(){var e=d(M).webId,t=w.endpoints.createDit.useMutation(),n=Object(l.a)(t,2),r=n[0],i=n[1],c=i.isLoading,a=i.isSuccess,s=i.data;if(a&&s)return Object($.jsx)(o.a,{to:"/items/".concat(encodeURIComponent(s))});return Object($.jsx)("div",{children:Object($.jsx)(ce,{thing:{type:"",uri:"".concat(I(e),"#").concat(globalThis.crypto.randomUUID()),label:"",description:"",tags:[]},onSubmit:function(t){return r({webId:e,thing:t})},disabled:c})})},oe=n(116),se=n.n(oe),ue=n(154),de=n.p+"static/media/main-image.62fd6594.png",le=n(195),je=n.n(le),be=n(117),fe=function(){var e=d(M).webId;return w.endpoints.readPerson.useQuery(e||be.skipToken).data},pe=function(e){var t,n=e.tags,i=Object(r.useMemo)((function(){return n.filter((function(e){return e.includes("wikidata")}))}),[n]),c=fe(),a=null!==(t=null===c||void 0===c?void 0:c.interests)&&void 0!==t?t:[],o=Y(L.endpoints.readInterest,i).filter((function(e){return e.data})).map((function(e){return e.data})).filter((function(e){return e})),s=n.map((function(e){var t;return null!==(t=o.find((function(t){return t.uri===e})))&&void 0!==t?t:{uri:e,label:e.split("/").pop(),description:e}}));return Object($.jsx)("ul",{className:se.a.horizontalList,children:s.map((function(e){return Object($.jsx)("li",{title:e.description.slice(0,300)+(e.description.length>300?"...":""),children:Object($.jsx)(k.b,{style:{color:a.includes(e.uri)?"red":void 0},to:"/tags/".concat(encodeURIComponent(e.uri)),children:e.label})},e.uri)}))})},he=function(e){var t=e.person,n=Object(r.useState)(de),i=Object(l.a)(n,2),c=i[0],a=i[1];return Object(r.useEffect)((function(){Object(f.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.photo){e.next=5;break}return e.next=3,Object(ue.a)(t.photo);case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})))()}),[t.photo]),Object($.jsxs)("div",{className:je.a.container,children:[Object($.jsx)("img",{className:je.a.avatar,src:c}),Object($.jsxs)("div",{children:[t.name," ",Object($.jsx)("a",{href:t.uri,children:"link"})]}),Object($.jsx)(pe,{tags:t.interests})]})},Oe=function(){var e=function(e){var t=Object(r.useMemo)((function(){return"\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n  PREFIX owl: <http://www.w3.org/2002/07/owl#>\n  PREFIX dbo: <http://dbpedia.org/ontology/>\n  SELECT DISTINCT ?person (COUNT(?thing) as ?commonCount)\n  WHERE {\n    <".concat(e,"> foaf:topic_interest ?thing.\n    ?person foaf:topic_interest ?thing.\n    FILTER(?person != <").concat(e,">)\n  }\n  GROUP BY ?person\n  ")}),[e]),n=Object(r.useMemo)((function(){return[e].concat(Object(j.a)(y))}),[e]),i=X(t,n),c=Object(l.a)(i,3);return{errors:c[0],data:c[1],isLoading:c[2]}}(d(M).webId),t=e.data,n=e.isLoading,i=Object(r.useMemo)((function(){return t.map((function(e){return e.person}))}),[t]),c=Y(w.endpoints.readPerson,i);if(0===y.length)return Object($.jsx)("div",{children:"No index servers were configured. You'll find nothing here."});var a=c.filter((function(e){return e.data})).map((function(e){return e.data})).filter((function(e){return e}));return Object($.jsxs)("div",{children:[n&&Object($.jsx)("div",{children:"Loading..."}),Object($.jsx)("ul",{className:se.a.horizontalList,children:a.map((function(e){return Object($.jsx)("li",{children:Object($.jsx)(he,{person:e})},e.uri)}))})]})},ve=function(e){var t=e.thing;return Object($.jsxs)("div",{children:[Object($.jsxs)("header",{children:[Object($.jsxs)("span",{children:["icon: ",t.type]})," ",Object($.jsx)(k.b,{to:"/items/".concat(encodeURIComponent(t.uri)),children:t.label})," ",Object($.jsx)("a",{href:t.uri,children:"link"})]}),Object($.jsx)("section",{children:t.description}),Object($.jsx)("section",{children:Object($.jsx)(pe,{tags:t.tags})})]})},me=function(){var e=Object(o.h)().itemUri,t=w.endpoints.readDitItem.useQuery(null!==e&&void 0!==e?e:P.f),n=t.data,r=t.isLoading,i=t.isUninitialized,c=w.endpoints.removeDit.useMutation(),a=Object(l.a)(c,2),s=a[0],u=a[1],d=u.isLoading;return u.isSuccess?Object($.jsx)(o.a,{to:"/"}):e?r||i?Object($.jsx)("div",{children:"Loading..."}):n?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(ve,{thing:n}),Object($.jsxs)("aside",{children:[Object($.jsx)(k.b,{to:"/items/".concat(encodeURIComponent(e),"/edit"),children:"Edit"})," ",Object($.jsx)("button",{disabled:d,onClick:function(){return s(e)},children:"DANGER: Remove"})]})]}):Object($.jsx)("div",{children:"Not Found"}):Object($.jsx)($.Fragment,{children:"No Content..."})},ge=function(){var e=d(M).webId,t=w.endpoints.readDitItems.useQuery(e?I(e):P.f),n=t.data,r=t.isLoading,i=t.isUninitialized;return r||i||!n?Object($.jsx)("div",{children:"Loading..."}):Object($.jsx)("div",{children:Object($.jsx)("ul",{className:se.a.horizontalList,children:n.map((function(e){return Object($.jsx)("li",{children:Object($.jsx)(ve,{thing:e})},e.uri)}))})})},xe=function(){var e=Object(o.h)().itemUri,t=w.endpoints.readDitItem.useQuery(null!==e&&void 0!==e?e:P.f),n=t.data,r=t.isLoading,i=t.isUninitialized,c=w.endpoints.updateDit.useMutation(),a=Object(l.a)(c,2),s=a[0],u=a[1],d=u.isLoading;if(u.isSuccess&&n)return Object($.jsx)(o.a,{to:"/items/".concat(encodeURIComponent(n.uri))});if(!e)return Object($.jsx)($.Fragment,{children:"No Content..."});if(r||i)return Object($.jsx)("div",{children:"Loading..."});if(!n)return Object($.jsx)("div",{children:"Not Found"});return Object($.jsx)(ce,{thing:n,onSubmit:function(e){return s({thing:e})},disabled:d,readonlyUri:!0})},ye=n(136),we=n.n(ye),Ie=n.p+"static/media/logo-white.d49770e9.svg",Se=function(){var e=d(M).webId,t=u(),n=w.endpoints.readPerson.useQuery(e||be.skipToken).data;return Object($.jsxs)("header",{className:we.a.header,children:[Object($.jsxs)(k.b,{className:we.a.homeLink,to:"/",children:[Object($.jsx)("img",{className:we.a.logo,src:Ie,alt:"ditup logo"})," ditup"]}),Object($.jsx)("span",{className:we.a.separator}),Object($.jsx)(k.b,{to:"/discover",children:"Discover"}),Object($.jsx)(k.b,{to:"/create",children:"Create"}),Object($.jsx)(k.b,{to:"/people/me",children:n?n.name:e}),Object($.jsx)("button",{onClick:function(){return t(Q())},children:"log out"})]})},_e=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],i=t[1],c=u(),a=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(F(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object($.jsxs)("div",{children:[Object($.jsx)("header",{children:"Log in with your Solid identity"}),Object($.jsxs)("form",{onSubmit:a,children:[Object($.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)},list:"providers"}),Object($.jsxs)("datalist",{id:"providers",children:[Object($.jsx)("option",{value:"https://solidcommunity.net",children:"Solid Community"}),Object($.jsx)("option",{value:"https://inrupt.net",children:"Inrupt"})]}),Object($.jsx)("input",{type:"submit",value:"Log in",disabled:!n})]})]})},ke=n(156),Ee=n.n(ke),Pe=function(){return Object($.jsx)("div",{className:Ee.a.page,children:Object($.jsxs)("div",{className:Ee.a.wrapper,children:[Object($.jsxs)("header",{children:[Object($.jsx)("h1",{children:"ditup"}),Object($.jsx)("p",{children:"do it together!"})]}),Object($.jsx)("img",{className:Ee.a.homeImage,src:de,alt:"mushroom"}),Object($.jsxs)("nav",{children:[Object($.jsx)(_e,{}),Object($.jsx)(k.b,{to:"/signup",children:Object($.jsx)("small",{children:"Get started with Solid?"})})]})]})})},Te=function(){var e,t=Object(o.h)().personId,n=d(M).webId,i="me"===t?n:t,c=w.endpoints.readPerson.useQuery(i),a=c.data,s=c.isLoading,u=w.endpoints.addInterest.useMutation(),j=Object(l.a)(u,1)[0],b=w.endpoints.removeInterest.useMutation(),p=Object(l.a)(b,1)[0],O=Object(r.useState)(de),v=Object(l.a)(O,2),m=v[0],g=v[1];return Object(r.useEffect)((function(){Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.photo){e.next=5;break}return e.next=3,Object(ue.a)(a.photo);case 3:t=e.sent,g(t);case 5:case"end":return e.stop()}}),e)})))()}),[null===a||void 0===a?void 0:a.photo]),a?Object($.jsxs)("div",{children:[Object($.jsx)("img",{src:m,style:{width:"10rem"}}),Object($.jsxs)("div",{children:[s?"...":null!==(e=a.name)&&void 0!==e?e:""," ",Object($.jsx)("a",{href:i,children:"link"})]}),Object($.jsx)(re,{tags:a.interests,onAddTag:function(e){return j({uri:i,interest:e})},onRemoveTag:function(e){return p({uri:i,interest:e})}}),Object($.jsx)("a",{href:"https://www.interesting.chat/?interests=".concat(encodeURIComponent(a.interests.filter((function(e){return e.includes("wikidata")})).map((function(e){return e.split("/").pop()})).join(","))),children:"Chat with a stranger about your interests"})]}):Object($.jsx)("div",{children:"Loading..."})},Le=function(){return Object($.jsx)("div",{children:"Info how to get started with Solid"})},Ce=function(){var e=Object(o.h)().tagUri,t=L.endpoints.readInterest.useQuery(e||be.skipToken),n=t.data,r=t.isLoading,i=t.isUninitialized;return r||i?Object($.jsx)($.Fragment,{children:"Loading..."}):n?Object($.jsxs)("div",{children:[Object($.jsxs)("header",{children:[Object($.jsx)("h1",{children:n.label}),Object($.jsx)("small",{children:Object($.jsx)("a",{href:n.uri,children:n.uri})}),Object($.jsx)("p",{children:n.aliases.join(" \u2022 ")}),n.officialWebsite&&Object($.jsxs)("p",{children:["website: ",Object($.jsx)("a",{href:n.officialWebsite,children:n.officialWebsite})]})]}),n.image&&Object($.jsx)("img",{src:n.image,alt:"Image of ".concat(n.label)}),Object($.jsx)("section",{style:{backgroundColor:"pink"},children:n.description})]}):Object($.jsx)($.Fragment,{children:"No data"})};var Re=function(){var e=d(M),t=u();return Object(r.useEffect)((function(){t(A())}),[t]),"loading"===e.status?Object($.jsx)("div",{children:"initializing"}):e.isLoggedIn?Object($.jsxs)("div",{children:[Object($.jsx)(Se,{}),Object($.jsxs)(o.d,{children:[Object($.jsx)(o.b,{path:"/",element:Object($.jsx)(ge,{})}),Object($.jsx)(o.b,{path:"/discover",element:Object($.jsx)(Oe,{})}),Object($.jsx)(o.b,{path:"/people/:personId",element:Object($.jsx)(Te,{})}),Object($.jsx)(o.b,{path:"/create",element:Object($.jsx)(ae,{})}),Object($.jsx)(o.b,{path:"/items/:itemUri",element:Object($.jsx)(me,{})}),Object($.jsx)(o.b,{path:"/items/:itemUri/edit",element:Object($.jsx)(xe,{})}),Object($.jsx)(o.b,{path:"/tags/:tagUri",element:Object($.jsx)(Ce,{})})]})]}):Object($.jsx)("div",{children:Object($.jsxs)(o.d,{children:[Object($.jsx)(o.b,{path:"*",element:Object($.jsx)(Pe,{})}),Object($.jsx)(o.b,{path:"/signup",element:Object($.jsx)(Le,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object($.jsx)(i.a.StrictMode,{children:Object($.jsx)(s.a,{store:V,children:Object($.jsx)(k.a,{children:Object($.jsx)(Re,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[885,1,2]]]);
//# sourceMappingURL=main.e605e148.chunk.js.map